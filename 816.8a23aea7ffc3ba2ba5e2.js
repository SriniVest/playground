"use strict";(self.webpackChunksign_language_playground=self.webpackChunksign_language_playground||[]).push([[816],{4816:(ot,G,V)=>{V.r(G),V.d(G,{pose_viewer:()=>le});var k=V(8239),b=V(3967);const $="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};var F=[],E=[],de="undefined"!=typeof Uint8Array?Uint8Array:Array,L=!1;function J(){L=!0;for(var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,t=i.length;e<t;++e)F[e]=i[e],E[i.charCodeAt(e)]=e;E["-".charCodeAt(0)]=62,E["_".charCodeAt(0)]=63}function ye(i){return F[i>>18&63]+F[i>>12&63]+F[i>>6&63]+F[63&i]}function ge(i,e,t){for(var s=[],h=e;h<t;h+=3)s.push(ye((i[h]<<16)+(i[h+1]<<8)+i[h+2]));return s.join("")}function D(i,e,t,n,s){var h,u,y=8*s-n-1,a=(1<<y)-1,r=a>>1,o=-7,f=t?s-1:0,l=t?-1:1,d=i[e+f];for(f+=l,h=d&(1<<-o)-1,d>>=-o,o+=y;o>0;h=256*h+i[e+f],f+=l,o-=8);for(u=h&(1<<-o)-1,h>>=-o,o+=n;o>0;u=256*u+i[e+f],f+=l,o-=8);if(0===h)h=1-r;else{if(h===a)return u?NaN:1/0*(d?-1:1);u+=Math.pow(2,n),h-=r}return(d?-1:1)*u*Math.pow(2,h-n)}function X(i,e,t,n,s,h){var u,y,a,r=8*h-s-1,o=(1<<r)-1,f=o>>1,l=23===s?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:h-1,c=n?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(y=isNaN(e)?1:0,u=o):(u=Math.floor(Math.log(e)/Math.LN2),e*(a=Math.pow(2,-u))<1&&(u--,a*=2),(e+=u+f>=1?l/a:l*Math.pow(2,1-f))*a>=2&&(u++,a/=2),u+f>=o?(y=0,u=o):u+f>=1?(y=(e*a-1)*Math.pow(2,s),u+=f):(y=e*Math.pow(2,f-1)*Math.pow(2,s),u=0));s>=8;i[t+d]=255&y,d+=c,y/=256,s-=8);for(u=u<<s|y,r+=s;r>0;i[t+d]=255&u,d+=c,u/=256,r-=8);i[t+d-c]|=128*g}var we={}.toString,q=Array.isArray||function(i){return"[object Array]"==we.call(i)};function Y(){return p.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function A(i,e){if(Y()<e)throw new RangeError("Invalid typed array length");return p.TYPED_ARRAY_SUPPORT?(i=new Uint8Array(e)).__proto__=p.prototype:(null===i&&(i=new p(e)),i.length=e),i}function p(i,e,t){if(!(p.TYPED_ARRAY_SUPPORT||this instanceof p))return new p(i,e,t);if("number"==typeof i){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return W(this,i)}return Z(this,i,e,t)}function Z(i,e,t,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(i,e,t,n){if(t<0||e.byteLength<t)throw new RangeError("'offset' is out of bounds");if(e.byteLength<t+(n||0))throw new RangeError("'length' is out of bounds");return e=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),p.TYPED_ARRAY_SUPPORT?(i=e).__proto__=p.prototype:i=j(i,e),i}(i,e,t,n):"string"==typeof e?function(i,e,t){if(("string"!=typeof t||""===t)&&(t="utf8"),!p.isEncoding(t))throw new TypeError('"encoding" must be a valid string encoding');var n=0|Q(e,t),s=(i=A(i,n)).write(e,t);return s!==n&&(i=i.slice(0,s)),i}(i,e,t):function(i,e){if(N(e)){var t=0|H(e.length);return 0===(i=A(i,t)).length||e.copy(i,0,0,t),i}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||function(i){return i!=i}(e.length)?A(i,0):j(i,e);if("Buffer"===e.type&&q(e.data))return j(i,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(i,e)}function K(i){if("number"!=typeof i)throw new TypeError('"size" argument must be a number');if(i<0)throw new RangeError('"size" argument must not be negative')}function W(i,e){if(K(e),i=A(i,e<0?0:0|H(e)),!p.TYPED_ARRAY_SUPPORT)for(var t=0;t<e;++t)i[t]=0;return i}function j(i,e){var t=e.length<0?0:0|H(e.length);i=A(i,t);for(var n=0;n<t;n+=1)i[n]=255&e[n];return i}function H(i){if(i>=Y())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Y().toString(16)+" bytes");return 0|i}function N(i){return!(null==i||!i._isBuffer)}function Q(i,e){if(N(i))return i.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(i)||i instanceof ArrayBuffer))return i.byteLength;"string"!=typeof i&&(i=""+i);var t=i.length;if(0===t)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":case void 0:return O(i).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*t;case"hex":return t>>>1;case"base64":return he(i).length;default:if(n)return O(i).length;e=(""+e).toLowerCase(),n=!0}}function Te(i,e,t){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length||((void 0===t||t>this.length)&&(t=this.length),t<=0)||(t>>>=0)<=(e>>>=0))return"";for(i||(i="utf8");;)switch(i){case"hex":return Be(this,e,t);case"utf8":case"utf-8":return ie(this,e,t);case"ascii":return Pe(this,e,t);case"latin1":case"binary":return ke(this,e,t);case"base64":return _e(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ve(this,e,t);default:if(n)throw new TypeError("Unknown encoding: "+i);i=(i+"").toLowerCase(),n=!0}}function _(i,e,t){var n=i[e];i[e]=i[t],i[t]=n}function ee(i,e,t,n,s){if(0===i.length)return-1;if("string"==typeof t?(n=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,isNaN(t)&&(t=s?0:i.length-1),t<0&&(t=i.length+t),t>=i.length){if(s)return-1;t=i.length-1}else if(t<0){if(!s)return-1;t=0}if("string"==typeof e&&(e=p.from(e,n)),N(e))return 0===e.length?-1:te(i,e,t,n,s);if("number"==typeof e)return e&=255,p.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?s?Uint8Array.prototype.indexOf.call(i,e,t):Uint8Array.prototype.lastIndexOf.call(i,e,t):te(i,[e],t,n,s);throw new TypeError("val must be string, number or Buffer")}function te(i,e,t,n,s){var r,h=1,u=i.length,y=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(i.length<2||e.length<2)return-1;h=2,u/=2,y/=2,t/=2}function a(d,c){return 1===h?d[c]:d.readUInt16BE(c*h)}if(s){var o=-1;for(r=t;r<u;r++)if(a(i,r)===a(e,-1===o?0:r-o)){if(-1===o&&(o=r),r-o+1===y)return o*h}else-1!==o&&(r-=r-o),o=-1}else for(t+y>u&&(t=u-y),r=t;r>=0;r--){for(var f=!0,l=0;l<y;l++)if(a(i,r+l)!==a(e,l)){f=!1;break}if(f)return r}return-1}function Re(i,e,t,n){t=Number(t)||0;var s=i.length-t;n?(n=Number(n))>s&&(n=s):n=s;var h=e.length;if(h%2!=0)throw new TypeError("Invalid hex string");n>h/2&&(n=h/2);for(var u=0;u<n;++u){var y=parseInt(e.substr(2*u,2),16);if(isNaN(y))return u;i[t+u]=y}return u}function Fe(i,e,t,n){return M(O(e,i.length-t),i,t,n)}function re(i,e,t,n){return M(function(i){for(var e=[],t=0;t<i.length;++t)e.push(255&i.charCodeAt(t));return e}(e),i,t,n)}function Ne(i,e,t,n){return re(i,e,t,n)}function Ae(i,e,t,n){return M(he(e),i,t,n)}function Ie(i,e,t,n){return M(function(i,e){for(var t,n,h=[],u=0;u<i.length&&!((e-=2)<0);++u)n=(t=i.charCodeAt(u))>>8,h.push(t%256),h.push(n);return h}(e,i.length-t),i,t,n)}function _e(i,e,t){return function(i){L||J();for(var e,t=i.length,n=t%3,s="",h=[],u=16383,y=0,a=t-n;y<a;y+=u)h.push(ge(i,y,y+u>a?a:y+u));return 1===n?(s+=F[(e=i[t-1])>>2],s+=F[e<<4&63],s+="=="):2===n&&(s+=F[(e=(i[t-2]<<8)+i[t-1])>>10],s+=F[e>>4&63],s+=F[e<<2&63],s+="="),h.push(s),h.join("")}(0===e&&t===i.length?i:i.slice(e,t))}function ie(i,e,t){t=Math.min(i.length,t);for(var n=[],s=e;s<t;){var a,r,o,f,h=i[s],u=null,y=h>239?4:h>223?3:h>191?2:1;if(s+y<=t)switch(y){case 1:h<128&&(u=h);break;case 2:128==(192&(a=i[s+1]))&&(f=(31&h)<<6|63&a)>127&&(u=f);break;case 3:r=i[s+2],128==(192&(a=i[s+1]))&&128==(192&r)&&(f=(15&h)<<12|(63&a)<<6|63&r)>2047&&(f<55296||f>57343)&&(u=f);break;case 4:r=i[s+2],o=i[s+3],128==(192&(a=i[s+1]))&&128==(192&r)&&128==(192&o)&&(f=(15&h)<<18|(63&a)<<12|(63&r)<<6|63&o)>65535&&f<1114112&&(u=f)}null===u?(u=65533,y=1):u>65535&&(n.push((u-=65536)>>>10&1023|55296),u=56320|1023&u),n.push(u),s+=y}return function(i){var e=i.length;if(e<=4096)return String.fromCharCode.apply(String,i);for(var t="",n=0;n<e;)t+=String.fromCharCode.apply(String,i.slice(n,n+=4096));return t}(n)}function Pe(i,e,t){var n="";t=Math.min(i.length,t);for(var s=e;s<t;++s)n+=String.fromCharCode(127&i[s]);return n}function ke(i,e,t){var n="";t=Math.min(i.length,t);for(var s=e;s<t;++s)n+=String.fromCharCode(i[s]);return n}function Be(i,e,t){var n=i.length;(!e||e<0)&&(e=0),(!t||t<0||t>n)&&(t=n);for(var s="",h=e;h<t;++h)s+=xe(i[h]);return s}function Ve(i,e,t){for(var n=i.slice(e,t),s="",h=0;h<n.length;h+=2)s+=String.fromCharCode(n[h]+256*n[h+1]);return s}function m(i,e,t){if(i%1!=0||i<0)throw new RangeError("offset is not uint");if(i+e>t)throw new RangeError("Trying to access beyond buffer length")}function C(i,e,t,n,s,h){if(!N(i))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>s||e<h)throw new RangeError('"value" argument is out of bounds');if(t+n>i.length)throw new RangeError("Index out of range")}function S(i,e,t,n){e<0&&(e=65535+e+1);for(var s=0,h=Math.min(i.length-t,2);s<h;++s)i[t+s]=(e&255<<8*(n?s:1-s))>>>8*(n?s:1-s)}function x(i,e,t,n){e<0&&(e=4294967295+e+1);for(var s=0,h=Math.min(i.length-t,4);s<h;++s)i[t+s]=e>>>8*(n?s:3-s)&255}function oe(i,e,t,n,s,h){if(t+n>i.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function se(i,e,t,n,s){return s||oe(i,0,t,4),X(i,e,t,n,23,4),t+4}function ae(i,e,t,n,s){return s||oe(i,0,t,8),X(i,e,t,n,52,8),t+8}p.TYPED_ARRAY_SUPPORT=void 0===$.TYPED_ARRAY_SUPPORT||$.TYPED_ARRAY_SUPPORT,p.poolSize=8192,p._augment=function(i){return i.__proto__=p.prototype,i},p.from=function(i,e,t){return Z(null,i,e,t)},p.TYPED_ARRAY_SUPPORT&&(p.prototype.__proto__=Uint8Array.prototype,p.__proto__=Uint8Array),p.alloc=function(i,e,t){return function(i,e,t,n){return K(e),e<=0?A(i,e):void 0!==t?"string"==typeof n?A(i,e).fill(t,n):A(i,e).fill(t):A(i,e)}(null,i,e,t)},p.allocUnsafe=function(i){return W(null,i)},p.allocUnsafeSlow=function(i){return W(null,i)},p.isBuffer=function(i){return null!=i&&(!!i._isBuffer||ue(i)||function(i){return"function"==typeof i.readFloatLE&&"function"==typeof i.slice&&ue(i.slice(0,0))}(i))},p.compare=function(e,t){if(!N(e)||!N(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,s=t.length,h=0,u=Math.min(n,s);h<u;++h)if(e[h]!==t[h]){n=e[h],s=t[h];break}return n<s?-1:s<n?1:0},p.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},p.concat=function(e,t){if(!q(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return p.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var s=p.allocUnsafe(t),h=0;for(n=0;n<e.length;++n){var u=e[n];if(!N(u))throw new TypeError('"list" argument must be an Array of Buffers');u.copy(s,h),h+=u.length}return s},p.byteLength=Q,p.prototype._isBuffer=!0,p.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)_(this,t,t+1);return this},p.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)_(this,t,t+3),_(this,t+1,t+2);return this},p.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)_(this,t,t+7),_(this,t+1,t+6),_(this,t+2,t+5),_(this,t+3,t+4);return this},p.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?ie(this,0,e):Te.apply(this,arguments)},p.prototype.equals=function(e){if(!N(e))throw new TypeError("Argument must be a Buffer");return this===e||0===p.compare(this,e)},p.prototype.inspect=function(){var e="";return this.length>0&&(e=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(e+=" ... ")),"<Buffer "+e+">"},p.prototype.compare=function(e,t,n,s,h){if(!N(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===s&&(s=0),void 0===h&&(h=this.length),t<0||n>e.length||s<0||h>this.length)throw new RangeError("out of range index");if(s>=h&&t>=n)return 0;if(s>=h)return-1;if(t>=n)return 1;if(this===e)return 0;for(var u=(h>>>=0)-(s>>>=0),y=(n>>>=0)-(t>>>=0),a=Math.min(u,y),r=this.slice(s,h),o=e.slice(t,n),f=0;f<a;++f)if(r[f]!==o[f]){u=r[f],y=o[f];break}return u<y?-1:y<u?1:0},p.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},p.prototype.indexOf=function(e,t,n){return ee(this,e,t,n,!0)},p.prototype.lastIndexOf=function(e,t,n){return ee(this,e,t,n,!1)},p.prototype.write=function(e,t,n,s){if(void 0===t)s="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)s=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===s&&(s="utf8")):(s=n,n=void 0)}var h=this.length-t;if((void 0===n||n>h)&&(n=h),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");s||(s="utf8");for(var u=!1;;)switch(s){case"hex":return Re(this,e,t,n);case"utf8":case"utf-8":return Fe(this,e,t,n);case"ascii":return re(this,e,t,n);case"latin1":case"binary":return Ne(this,e,t,n);case"base64":return Ae(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ie(this,e,t,n);default:if(u)throw new TypeError("Unknown encoding: "+s);s=(""+s).toLowerCase(),u=!0}},p.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},p.prototype.slice=function(e,t){var s,n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e),p.TYPED_ARRAY_SUPPORT)(s=this.subarray(e,t)).__proto__=p.prototype;else{var h=t-e;s=new p(h,void 0);for(var u=0;u<h;++u)s[u]=this[u+e]}return s},p.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||m(e,t,this.length);for(var s=this[e],h=1,u=0;++u<t&&(h*=256);)s+=this[e+u]*h;return s},p.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||m(e,t,this.length);for(var s=this[e+--t],h=1;t>0&&(h*=256);)s+=this[e+--t]*h;return s},p.prototype.readUInt8=function(e,t){return t||m(e,1,this.length),this[e]},p.prototype.readUInt16LE=function(e,t){return t||m(e,2,this.length),this[e]|this[e+1]<<8},p.prototype.readUInt16BE=function(e,t){return t||m(e,2,this.length),this[e]<<8|this[e+1]},p.prototype.readUInt32LE=function(e,t){return t||m(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},p.prototype.readUInt32BE=function(e,t){return t||m(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},p.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||m(e,t,this.length);for(var s=this[e],h=1,u=0;++u<t&&(h*=256);)s+=this[e+u]*h;return s>=(h*=128)&&(s-=Math.pow(2,8*t)),s},p.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||m(e,t,this.length);for(var s=t,h=1,u=this[e+--s];s>0&&(h*=256);)u+=this[e+--s]*h;return u>=(h*=128)&&(u-=Math.pow(2,8*t)),u},p.prototype.readInt8=function(e,t){return t||m(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},p.prototype.readInt16LE=function(e,t){t||m(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},p.prototype.readInt16BE=function(e,t){t||m(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},p.prototype.readInt32LE=function(e,t){return t||m(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},p.prototype.readInt32BE=function(e,t){return t||m(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},p.prototype.readFloatLE=function(e,t){return t||m(e,4,this.length),D(this,e,!0,23,4)},p.prototype.readFloatBE=function(e,t){return t||m(e,4,this.length),D(this,e,!1,23,4)},p.prototype.readDoubleLE=function(e,t){return t||m(e,8,this.length),D(this,e,!0,52,8)},p.prototype.readDoubleBE=function(e,t){return t||m(e,8,this.length),D(this,e,!1,52,8)},p.prototype.writeUIntLE=function(e,t,n,s){e=+e,t|=0,n|=0,s||C(this,e,t,n,Math.pow(2,8*n)-1,0);var u=1,y=0;for(this[t]=255&e;++y<n&&(u*=256);)this[t+y]=e/u&255;return t+n},p.prototype.writeUIntBE=function(e,t,n,s){e=+e,t|=0,n|=0,s||C(this,e,t,n,Math.pow(2,8*n)-1,0);var u=n-1,y=1;for(this[t+u]=255&e;--u>=0&&(y*=256);)this[t+u]=e/y&255;return t+n},p.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||C(this,e,t,1,255,0),p.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},p.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||C(this,e,t,2,65535,0),p.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):S(this,e,t,!0),t+2},p.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||C(this,e,t,2,65535,0),p.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):S(this,e,t,!1),t+2},p.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||C(this,e,t,4,4294967295,0),p.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):x(this,e,t,!0),t+4},p.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||C(this,e,t,4,4294967295,0),p.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):x(this,e,t,!1),t+4},p.prototype.writeIntLE=function(e,t,n,s){if(e=+e,t|=0,!s){var h=Math.pow(2,8*n-1);C(this,e,t,n,h-1,-h)}var u=0,y=1,a=0;for(this[t]=255&e;++u<n&&(y*=256);)e<0&&0===a&&0!==this[t+u-1]&&(a=1),this[t+u]=(e/y>>0)-a&255;return t+n},p.prototype.writeIntBE=function(e,t,n,s){if(e=+e,t|=0,!s){var h=Math.pow(2,8*n-1);C(this,e,t,n,h-1,-h)}var u=n-1,y=1,a=0;for(this[t+u]=255&e;--u>=0&&(y*=256);)e<0&&0===a&&0!==this[t+u+1]&&(a=1),this[t+u]=(e/y>>0)-a&255;return t+n},p.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||C(this,e,t,1,127,-128),p.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},p.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||C(this,e,t,2,32767,-32768),p.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):S(this,e,t,!0),t+2},p.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||C(this,e,t,2,32767,-32768),p.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):S(this,e,t,!1),t+2},p.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||C(this,e,t,4,2147483647,-2147483648),p.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):x(this,e,t,!0),t+4},p.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||C(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),p.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):x(this,e,t,!1),t+4},p.prototype.writeFloatLE=function(e,t,n){return se(this,e,t,!0,n)},p.prototype.writeFloatBE=function(e,t,n){return se(this,e,t,!1,n)},p.prototype.writeDoubleLE=function(e,t,n){return ae(this,e,t,!0,n)},p.prototype.writeDoubleBE=function(e,t,n){return ae(this,e,t,!1,n)},p.prototype.copy=function(e,t,n,s){if(n||(n=0),!s&&0!==s&&(s=this.length),t>=e.length&&(t=e.length),t||(t=0),s>0&&s<n&&(s=n),s===n||0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(s<0)throw new RangeError("sourceEnd out of bounds");s>this.length&&(s=this.length),e.length-t<s-n&&(s=e.length-t+n);var u,h=s-n;if(this===e&&n<t&&t<s)for(u=h-1;u>=0;--u)e[u+t]=this[u+n];else if(h<1e3||!p.TYPED_ARRAY_SUPPORT)for(u=0;u<h;++u)e[u+t]=this[u+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+h),t);return h},p.prototype.fill=function(e,t,n,s){if("string"==typeof e){if("string"==typeof t?(s=t,t=0,n=this.length):"string"==typeof n&&(s=n,n=this.length),1===e.length){var h=e.charCodeAt(0);h<256&&(e=h)}if(void 0!==s&&"string"!=typeof s)throw new TypeError("encoding must be a string");if("string"==typeof s&&!p.isEncoding(s))throw new TypeError("Unknown encoding: "+s)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var u;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(u=t;u<n;++u)this[u]=e;else{var y=N(e)?e:O(new p(e,s).toString()),a=y.length;for(u=0;u<n-t;++u)this[u+t]=y[u%a]}return this};var $e=/[^+\/0-9A-Za-z-_]/g;function xe(i){return i<16?"0"+i.toString(16):i.toString(16)}function O(i,e){e=e||1/0;for(var t,n=i.length,s=null,h=[],u=0;u<n;++u){if((t=i.charCodeAt(u))>55295&&t<57344){if(!s){if(t>56319){(e-=3)>-1&&h.push(239,191,189);continue}if(u+1===n){(e-=3)>-1&&h.push(239,191,189);continue}s=t;continue}if(t<56320){(e-=3)>-1&&h.push(239,191,189),s=t;continue}t=65536+(s-55296<<10|t-56320)}else s&&(e-=3)>-1&&h.push(239,191,189);if(s=null,t<128){if((e-=1)<0)break;h.push(t)}else if(t<2048){if((e-=2)<0)break;h.push(t>>6|192,63&t|128)}else if(t<65536){if((e-=3)<0)break;h.push(t>>12|224,t>>6&63|128,63&t|128)}else{if(!(t<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;h.push(t>>18|240,t>>12&63|128,t>>6&63|128,63&t|128)}}return h}function he(i){return function(i){L||J();var e,t,n,s,h,u,y=i.length;if(y%4>0)throw new Error("Invalid string. Length must be a multiple of 4");u=new de(3*y/4-(h="="===i[y-2]?2:"="===i[y-1]?1:0)),n=h>0?y-4:y;var a=0;for(e=0,t=0;e<n;e+=4,t+=3)s=E[i.charCodeAt(e)]<<18|E[i.charCodeAt(e+1)]<<12|E[i.charCodeAt(e+2)]<<6|E[i.charCodeAt(e+3)],u[a++]=s>>16&255,u[a++]=s>>8&255,u[a++]=255&s;return 2===h?(s=E[i.charCodeAt(e)]<<2|E[i.charCodeAt(e+1)]>>4,u[a++]=255&s):1===h&&(s=E[i.charCodeAt(e)]<<10|E[i.charCodeAt(e+1)]<<4|E[i.charCodeAt(e+2)]>>2,u[a++]=s>>8&255,u[a++]=255&s),u}(function(i){if((i=function(i){return i.trim?i.trim():i.replace(/^\s+|\s+$/g,"")}(i).replace($e,"")).length<2)return"";for(;i.length%4!=0;)i+="=";return i}(i))}function M(i,e,t,n){for(var s=0;s<n&&!(s+t>=e.length||s>=i.length);++s)e[s+t]=i[s];return s}function ue(i){return!!i.constructor&&"function"==typeof i.constructor.isBuffer&&i.constructor.isBuffer(i)}function fe(i,e,t){return i(t={path:e,exports:{},require:function(n,s){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}()}},t.exports),t.exports}!function(i){function e(){}function t(a,r){if(r=void 0===r?{fatal:!1}:r,-1===u.indexOf((a=void 0===a?"utf-8":a).toLowerCase()))throw new RangeError("Failed to construct 'TextDecoder': The encoding label provided ('"+a+"') is invalid.");if(r.fatal)throw Error("Failed to construct 'TextDecoder': the 'fatal' option is unsupported.")}function h(a){for(var r=0,o=Math.min(65536,a.length+1),f=new Uint16Array(o),l=[],d=0;;){var c=r<a.length;if(!c||d>=o-1){if(l.push(String.fromCharCode.apply(null,f.subarray(0,d))),!c)return l.join("");a=a.subarray(r),d=r=0}if(0==(128&(c=a[r++])))f[d++]=c;else if(192==(224&c)){var g=63&a[r++];f[d++]=(31&c)<<6|g}else if(224==(240&c)){g=63&a[r++];var w=63&a[r++];f[d++]=(31&c)<<12|g<<6|w}else 240==(248&c)&&(65535<(c=(7&c)<<18|(g=63&a[r++])<<12|(w=63&a[r++])<<6|63&a[r++])&&(f[d++]=(c-=65536)>>>10&1023|55296,c=56320|1023&c),f[d++]=c)}}if(i.TextEncoder&&i.TextDecoder)return!1;var u=["utf-8","utf8","unicode-1-1-utf-8"];Object.defineProperty(e.prototype,"encoding",{value:"utf-8"}),e.prototype.encode=function(a,r){if((r=void 0===r?{stream:!1}:r).stream)throw Error("Failed to encode: the 'stream' option is unsupported.");r=0;for(var o=a.length,f=0,l=Math.max(32,o+(o>>>1)+7),d=new Uint8Array(l>>>3<<3);r<o;){var c=a.charCodeAt(r++);if(55296<=c&&56319>=c){if(r<o){var g=a.charCodeAt(r);56320==(64512&g)&&(++r,c=((1023&c)<<10)+(1023&g)+65536)}if(55296<=c&&56319>=c)continue}if(f+4>d.length&&(l+=8,l=(l*=1+r/a.length*2)>>>3<<3,(g=new Uint8Array(l)).set(d),d=g),0==(4294967168&c))d[f++]=c;else{if(0==(4294965248&c))d[f++]=c>>>6&31|192;else if(0==(4294901760&c))d[f++]=c>>>12&15|224,d[f++]=c>>>6&63|128;else{if(0!=(4292870144&c))continue;d[f++]=c>>>18&7|240,d[f++]=c>>>12&63|128,d[f++]=c>>>6&63|128}d[f++]=63&c|128}}return d.slice?d.slice(0,f):d.subarray(0,f)},Object.defineProperty(t.prototype,"encoding",{value:"utf-8"}),Object.defineProperty(t.prototype,"fatal",{value:!1}),Object.defineProperty(t.prototype,"ignoreBOM",{value:!1});var y=h;p.from?y=function(a){return p.from(a.buffer,a.byteOffset,a.byteLength).toString("utf-8")}:"function"==typeof Blob&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&(y=function(a){var r=URL.createObjectURL(new Blob([a],{type:"text/plain;charset=UTF-8"}));try{var o=new XMLHttpRequest;return o.open("GET",r,!1),o.send(),o.responseText}catch(f){return h(a)}finally{URL.revokeObjectURL(r)}}),t.prototype.decode=function(a,r){if((r=void 0===r?{stream:!1}:r).stream)throw Error("Failed to decode: the 'stream' option is unsupported.");return a=a instanceof Uint8Array?a:a.buffer instanceof ArrayBuffer?new Uint8Array(a.buffer):new Uint8Array(a),y(a)},i.TextEncoder=e,i.TextDecoder=t}("undefined"!=typeof window?window:void 0!==$?$:void 0);var He=fe(function(i,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Context=void 0;var t=function(){function n(s){this.code="",this.scopes=[["vars"]],this.bitFields=[],this.tmpVariableCount=0,this.references={},this.imports=[],this.reverseImports=new Map,this.importPath=s}return n.prototype.generateVariable=function(s){var h=[];return h.push.apply(h,this.scopes[this.scopes.length-1]),s&&h.push(s),h.join(".")},n.prototype.generateOption=function(s){switch(typeof s){case"number":return s.toString();case"string":return this.generateVariable(s);case"function":return this.addImport(s)+".call("+this.generateVariable()+", vars)"}},n.prototype.generateError=function(s){this.pushCode("throw new Error("+s+");")},n.prototype.generateTmpVariable=function(){return"$tmp"+this.tmpVariableCount++},n.prototype.pushCode=function(s){this.code+=s+"\n"},n.prototype.pushPath=function(s){s&&this.scopes[this.scopes.length-1].push(s)},n.prototype.popPath=function(s){s&&this.scopes[this.scopes.length-1].pop()},n.prototype.pushScope=function(s){this.scopes.push([s])},n.prototype.popScope=function(){this.scopes.pop()},n.prototype.addImport=function(s){if(!this.importPath)return"("+s+")";var h=this.reverseImports.get(s);return h||(h=this.imports.push(s)-1,this.reverseImports.set(s,h)),this.importPath+"["+h+"]"},n.prototype.addReference=function(s){this.references[s]||(this.references[s]={resolved:!1,requested:!1})},n.prototype.markResolved=function(s){this.references[s].resolved=!0},n.prototype.markRequested=function(s){var h=this;s.forEach(function(u){h.references[u].requested=!0})},n.prototype.getUnresolvedReferences=function(){var s=this.references;return Object.keys(this.references).filter(function(h){return!s[h].resolved&&!s[h].requested})},n}();e.Context=t}),Ge=fe(function(i,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Parser=void 0;var t={},n="___parser_",s={uint8:1,uint16le:2,uint16be:2,uint32le:4,uint32be:4,int8:1,int16le:2,int16be:2,int32le:4,int32be:4,int64be:8,int64le:8,uint64be:8,uint64le:8,floatle:4,floatbe:4,doublele:8,doublebe:8},h={uint8:"Uint8",uint16le:"Uint16",uint16be:"Uint16",uint32le:"Uint32",uint32be:"Uint32",int8:"Int8",int16le:"Int16",int16be:"Int16",int32le:"Int32",int32be:"Int32",int64be:"BigInt64",int64le:"BigInt64",uint64be:"BigUint64",uint64le:"BigUint64",floatle:"Float32",floatbe:"Float32",doublele:"Float64",doublebe:"Float64"},u={uint8:!1,uint16le:!0,uint16be:!1,uint32le:!0,uint32be:!1,int8:!1,int16le:!0,int16be:!1,int32le:!0,int32be:!1,int64be:!1,int64le:!0,uint64be:!1,uint64le:!0,floatle:!0,floatbe:!1,doublele:!0,doublebe:!1},y=function(){function a(){this.varName="",this.type="",this.options={},this.next=null,this.head=null,this.compiled=null,this.endian="be",this.constructorFn=null,this.alias=null}return a.start=function(){return new a},a.prototype.primitiveGenerateN=function(r,o){var f=h[r],l=u[r];o.pushCode(o.generateVariable(this.varName)+" = dataView.get"+f+"(offset, "+l+");"),o.pushCode("offset += "+s[r]+";")},a.prototype.primitiveN=function(r,o,f){return this.setNextParser(r,o,f)},a.prototype.useThisEndian=function(r){return r+this.endian.toLowerCase()},a.prototype.uint8=function(r,o){return this.primitiveN("uint8",r,o)},a.prototype.uint16=function(r,o){return this.primitiveN(this.useThisEndian("uint16"),r,o)},a.prototype.uint16le=function(r,o){return this.primitiveN("uint16le",r,o)},a.prototype.uint16be=function(r,o){return this.primitiveN("uint16be",r,o)},a.prototype.uint32=function(r,o){return this.primitiveN(this.useThisEndian("uint32"),r,o)},a.prototype.uint32le=function(r,o){return this.primitiveN("uint32le",r,o)},a.prototype.uint32be=function(r,o){return this.primitiveN("uint32be",r,o)},a.prototype.int8=function(r,o){return this.primitiveN("int8",r,o)},a.prototype.int16=function(r,o){return this.primitiveN(this.useThisEndian("int16"),r,o)},a.prototype.int16le=function(r,o){return this.primitiveN("int16le",r,o)},a.prototype.int16be=function(r,o){return this.primitiveN("int16be",r,o)},a.prototype.int32=function(r,o){return this.primitiveN(this.useThisEndian("int32"),r,o)},a.prototype.int32le=function(r,o){return this.primitiveN("int32le",r,o)},a.prototype.int32be=function(r,o){return this.primitiveN("int32be",r,o)},a.prototype.bigIntVersionCheck=function(){if(!DataView.prototype.getBigInt64)throw new Error("BigInt64 is unsupported in this runtime")},a.prototype.int64=function(r,o){return this.bigIntVersionCheck(),this.primitiveN(this.useThisEndian("int64"),r,o)},a.prototype.int64be=function(r,o){return this.bigIntVersionCheck(),this.primitiveN("int64be",r,o)},a.prototype.int64le=function(r,o){return this.bigIntVersionCheck(),this.primitiveN("int64le",r,o)},a.prototype.uint64=function(r,o){return this.bigIntVersionCheck(),this.primitiveN(this.useThisEndian("uint64"),r,o)},a.prototype.uint64be=function(r,o){return this.bigIntVersionCheck(),this.primitiveN("uint64be",r,o)},a.prototype.uint64le=function(r,o){return this.bigIntVersionCheck(),this.primitiveN("uint64le",r,o)},a.prototype.floatle=function(r,o){return this.primitiveN("floatle",r,o)},a.prototype.floatbe=function(r,o){return this.primitiveN("floatbe",r,o)},a.prototype.doublele=function(r,o){return this.primitiveN("doublele",r,o)},a.prototype.doublebe=function(r,o){return this.primitiveN("doublebe",r,o)},a.prototype.bitN=function(r,o,f){return f||(f={}),f.length=r,this.setNextParser("bit",o,f)},a.prototype.bit1=function(r,o){return this.bitN(1,r,o)},a.prototype.bit2=function(r,o){return this.bitN(2,r,o)},a.prototype.bit3=function(r,o){return this.bitN(3,r,o)},a.prototype.bit4=function(r,o){return this.bitN(4,r,o)},a.prototype.bit5=function(r,o){return this.bitN(5,r,o)},a.prototype.bit6=function(r,o){return this.bitN(6,r,o)},a.prototype.bit7=function(r,o){return this.bitN(7,r,o)},a.prototype.bit8=function(r,o){return this.bitN(8,r,o)},a.prototype.bit9=function(r,o){return this.bitN(9,r,o)},a.prototype.bit10=function(r,o){return this.bitN(10,r,o)},a.prototype.bit11=function(r,o){return this.bitN(11,r,o)},a.prototype.bit12=function(r,o){return this.bitN(12,r,o)},a.prototype.bit13=function(r,o){return this.bitN(13,r,o)},a.prototype.bit14=function(r,o){return this.bitN(14,r,o)},a.prototype.bit15=function(r,o){return this.bitN(15,r,o)},a.prototype.bit16=function(r,o){return this.bitN(16,r,o)},a.prototype.bit17=function(r,o){return this.bitN(17,r,o)},a.prototype.bit18=function(r,o){return this.bitN(18,r,o)},a.prototype.bit19=function(r,o){return this.bitN(19,r,o)},a.prototype.bit20=function(r,o){return this.bitN(20,r,o)},a.prototype.bit21=function(r,o){return this.bitN(21,r,o)},a.prototype.bit22=function(r,o){return this.bitN(22,r,o)},a.prototype.bit23=function(r,o){return this.bitN(23,r,o)},a.prototype.bit24=function(r,o){return this.bitN(24,r,o)},a.prototype.bit25=function(r,o){return this.bitN(25,r,o)},a.prototype.bit26=function(r,o){return this.bitN(26,r,o)},a.prototype.bit27=function(r,o){return this.bitN(27,r,o)},a.prototype.bit28=function(r,o){return this.bitN(28,r,o)},a.prototype.bit29=function(r,o){return this.bitN(29,r,o)},a.prototype.bit30=function(r,o){return this.bitN(30,r,o)},a.prototype.bit31=function(r,o){return this.bitN(31,r,o)},a.prototype.bit32=function(r,o){return this.bitN(32,r,o)},a.prototype.namely=function(r){return t[r]=this,this.alias=r,this},a.prototype.skip=function(r,o){return this.seek(r,o)},a.prototype.seek=function(r,o){if(o&&o.assert)throw new Error("assert option on seek is not allowed.");return this.setNextParser("seek","",{length:r})},a.prototype.string=function(r,o){if(!o.zeroTerminated&&!o.length&&!o.greedy)throw new Error("Neither length, zeroTerminated, nor greedy is defined for string.");if((o.zeroTerminated||o.length)&&o.greedy)throw new Error("greedy is mutually exclusive with length and zeroTerminated for string.");if(o.stripNull&&!o.length&&!o.greedy)throw new Error("Length or greedy must be defined if stripNull is defined.");return o.encoding=o.encoding||"utf8",this.setNextParser("string",r,o)},a.prototype.buffer=function(r,o){if(!o.length&&!o.readUntil)throw new Error("Length nor readUntil is defined in buffer parser");return this.setNextParser("buffer",r,o)},a.prototype.wrapped=function(r,o){if(!o.length&&!o.readUntil)throw new Error("Length nor readUntil is defined in buffer parser");if(!o.wrapper||!o.type)throw new Error("Both wrapper and type must be defined in wrapper parser");return this.setNextParser("wrapper",r,o)},a.prototype.array=function(r,o){if(!o.readUntil&&!o.length&&!o.lengthInBytes)throw new Error("Length option of array is not defined.");if(!o.type)throw new Error("Type option of array is not defined.");if("string"==typeof o.type&&!t[o.type]&&Object.keys(s).indexOf(o.type)<0)throw new Error('Specified primitive type "'+o.type+'" is not supported.');return this.setNextParser("array",r,o)},a.prototype.choice=function(r,o){if("object"!=typeof o&&"object"==typeof r&&(o=r,r=null),!o.tag)throw new Error("Tag option of array is not defined.");if(!o.choices)throw new Error("Choices option of array is not defined.");return Object.keys(o.choices).forEach(function(f){var l=parseInt(f,10),d=o.choices[l];if(isNaN(l))throw new Error("Key of choices must be a number.");if(!d)throw new Error("Choice Case "+f+" of "+r+" is not valid.");if("string"==typeof d&&!t[d]&&Object.keys(s).indexOf(d)<0)throw new Error('Specified primitive type "'+d+'" is not supported.')}),this.setNextParser("choice",r,o)},a.prototype.nest=function(r,o){if("object"!=typeof o&&"object"==typeof r&&(o=r,r=null),!o.type)throw new Error("Type option of nest is not defined.");if(!(o.type instanceof a||t[o.type]))throw new Error("Type option of nest must be a Parser object.");if(!(o.type instanceof a||r))throw new Error("options.type must be a object if variable name is omitted.");return this.setNextParser("nest",r,o)},a.prototype.pointer=function(r,o){if(!o.offset)throw new Error("Offset option of pointer is not defined.");if(!o.type)throw new Error("Type option of pointer is not defined.");if("string"==typeof o.type){if(Object.keys(s).indexOf(o.type)<0&&!t[o.type])throw new Error('Specified type "'+o.type+'" is not supported.')}else if(!(o.type instanceof a))throw new Error("Type option of pointer must be a string or a Parser object.");return this.setNextParser("pointer",r,o)},a.prototype.saveOffset=function(r,o){return this.setNextParser("saveOffset",r,o)},a.prototype.endianess=function(r){switch(r.toLowerCase()){case"little":this.endian="le";break;case"big":this.endian="be";break;default:throw new Error("Invalid endianess: "+r)}return this},a.prototype.create=function(r){if(!(r instanceof Function))throw new Error("Constructor must be a Function object.");return this.constructorFn=r,this},a.prototype.getContext=function(r){var o=new He.Context(r);return o.pushCode("var dataView = new DataView(buffer.buffer, buffer.byteOffset, buffer.length);"),this.alias?(this.addAliasedCode(o),o.pushCode("return "+(n+this.alias)+"(0).result;")):this.addRawCode(o),o},a.prototype.getCode=function(){return this.getContext().code},a.prototype.addRawCode=function(r){r.pushCode("var offset = 0;"),r.pushCode("var vars = "+(this.constructorFn?"new constructorFn()":"{}")+";"),r.pushCode("vars.$parent = null;"),r.pushCode("vars.$root = vars;"),this.generate(r),this.resolveReferences(r),r.pushCode("delete vars.$parent;"),r.pushCode("delete vars.$root;"),r.pushCode("return vars;")},a.prototype.addAliasedCode=function(r){return r.pushCode("function "+(n+this.alias)+"(offset, context) {"),r.pushCode("var vars = "+(this.constructorFn?"new constructorFn()":"{}")+";"),r.pushCode("var ctx = Object.assign({$parent: null, $root: vars}, context || {});"),r.pushCode("vars = Object.assign(vars, ctx);"),this.generate(r),r.markResolved(this.alias),this.resolveReferences(r),r.pushCode("Object.keys(ctx).forEach(function (item) { delete vars[item]; });"),r.pushCode("return { offset: offset, result: vars };"),r.pushCode("}"),r},a.prototype.resolveReferences=function(r){var o=r.getUnresolvedReferences();r.markRequested(o),o.forEach(function(f){t[f].addAliasedCode(r)})},a.prototype.compile=function(){var r="imports",o=this.getContext(r);this.compiled=new Function(r,"TextDecoder","return function (buffer, constructorFn) { "+o.code+" };")(o.imports,TextDecoder)},a.prototype.sizeOf=function(){var r=NaN;if(Object.keys(s).indexOf(this.type)>=0)r=s[this.type];else if("string"===this.type&&"number"==typeof this.options.length)r=this.options.length;else if("buffer"===this.type&&"number"==typeof this.options.length)r=this.options.length;else if("array"===this.type&&"number"==typeof this.options.length){var o=NaN;"string"==typeof this.options.type?o=s[this.options.type]:this.options.type instanceof a&&(o=this.options.type.sizeOf()),r=this.options.length*o}else"seek"===this.type?r=this.options.length:"nest"===this.type?r=this.options.type.sizeOf():this.type||(r=0);return this.next&&(r+=this.next.sizeOf()),r},a.prototype.parse=function(r){return this.compiled||this.compile(),this.compiled(r,this.constructorFn)},a.prototype.setNextParser=function(r,o,f){var l=new a;return l.type=r,l.varName=o,l.options=f||l.options,l.endian=this.endian,this.head?this.head.next=l:this.next=l,this.head=l,this},a.prototype.generate=function(r){if(this.type){switch(this.type){case"uint8":case"uint16le":case"uint16be":case"uint32le":case"uint32be":case"int8":case"int16le":case"int16be":case"int32le":case"int32be":case"int64be":case"int64le":case"uint64be":case"uint64le":case"floatle":case"floatbe":case"doublele":case"doublebe":this.primitiveGenerateN(this.type,r);break;case"bit":this.generateBit(r);break;case"string":this.generateString(r);break;case"buffer":this.generateBuffer(r);break;case"seek":this.generateSeek(r);break;case"nest":this.generateNest(r);break;case"array":this.generateArray(r);break;case"choice":this.generateChoice(r);break;case"pointer":this.generatePointer(r);break;case"saveOffset":this.generateSaveOffset(r);break;case"wrapper":this.generateWrapper(r)}this.generateAssert(r)}var o=r.generateVariable(this.varName);return this.options.formatter&&this.generateFormatter(r,o,this.options.formatter),this.generateNext(r)},a.prototype.generateAssert=function(r){if(this.options.assert){var o=r.generateVariable(this.varName);switch(typeof this.options.assert){case"function":var f=r.addImport(this.options.assert);r.pushCode("if (!"+f+".call(vars, "+o+")) {");break;case"number":r.pushCode("if ("+this.options.assert+" !== "+o+") {");break;case"string":r.pushCode('if ("'+this.options.assert+'" !== '+o+") {");break;default:throw new Error("Assert option supports only strings, numbers and assert functions.")}r.generateError('"Assert error: '+o+' is " + '+this.options.assert),r.pushCode("}")}},a.prototype.generateNext=function(r){return this.next&&(r=this.next.generate(r)),r},a.prototype.generateBit=function(r){var o=JSON.parse(JSON.stringify(this));if(o.varName=r.generateVariable(o.varName),r.bitFields.push(o),!this.next||this.next&&["bit","nest"].indexOf(this.next.type)<0){var f=0;r.bitFields.forEach(function(v){return f+=v.options.length});var l=r.generateTmpVariable();if(f<=8)r.pushCode("var "+l+" = dataView.getUint8(offset);"),f=8;else if(f<=16)r.pushCode("var "+l+" = dataView.getUint16(offset);"),f=16;else if(f<=24){var d=r.generateTmpVariable(),c=r.generateTmpVariable();r.pushCode("var "+d+" = dataView.getUint16(offset);"),r.pushCode("var "+c+" = dataView.getUint8(offset + 2);"),r.pushCode("var "+l+" = ("+d+" << 8) | "+c+";"),f=24}else{if(!(f<=32))throw new Error("Currently, bit field sequence longer than 4-bytes is not supported.");r.pushCode("var "+l+" = dataView.getUint32(offset);"),f=32}r.pushCode("offset += "+f/8+";");var g=0,w="be"===this.endian;r.bitFields.forEach(function(v){var R=v.options.length;r.pushCode(v.varName+" = "+l+" >> "+(w?f-g-R:g)+" & "+((1<<R)-1)+";"),g+=R}),r.bitFields=[]}},a.prototype.generateSeek=function(r){var o=r.generateOption(this.options.length);r.pushCode("offset += "+o+";")},a.prototype.generateString=function(r){var o=r.generateVariable(this.varName),f=r.generateTmpVariable(),l=this.options.encoding,d="hex"===l.toLowerCase(),c='b => b.toString(16).padStart(2, "0")';if(this.options.length&&this.options.zeroTerminated){var g=this.options.length;r.pushCode("var "+f+" = offset;"),r.pushCode("while(dataView.getUint8(offset++) !== 0 && offset - "+f+" < "+g+");");var w="offset - "+f+" < "+g+" ? offset - 1 : offset";r.pushCode(d?o+" = Array.from(buffer.subarray("+f+", "+w+"), "+c+").join('');":o+" = new TextDecoder('"+l+"').decode(buffer.subarray("+f+", "+w+"));")}else this.options.length?(g=r.generateOption(this.options.length),r.pushCode(d?o+" = Array.from(buffer.subarray(offset, offset + "+g+"), "+c+").join('');":o+" = new TextDecoder('"+l+"').decode(buffer.subarray(offset, offset + "+g+"));"),r.pushCode("offset += "+g+";")):this.options.zeroTerminated?(r.pushCode("var "+f+" = offset;"),r.pushCode("while(dataView.getUint8(offset++) !== 0);"),r.pushCode(d?o+" = Array.from(buffer.subarray("+f+", offset - 1), "+c+").join('');":o+" = new TextDecoder('"+l+"').decode(buffer.subarray("+f+", offset - 1));")):this.options.greedy&&(r.pushCode("var "+f+" = offset;"),r.pushCode("while(buffer.length > offset++);"),r.pushCode(d?o+" = Array.from(buffer.subarray("+f+", offset), "+c+").join('');":o+" = new TextDecoder('"+l+"').decode(buffer.subarray("+f+", offset));"));this.options.stripNull&&r.pushCode(o+" = "+o+".replace(/\\x00+$/g, '')")},a.prototype.generateBuffer=function(r){var o=r.generateVariable(this.varName);if("function"==typeof this.options.readUntil){var f=this.options.readUntil,l=r.generateTmpVariable(),d=r.generateTmpVariable();r.pushCode("var "+l+" = offset;"),r.pushCode("var "+d+" = 0;"),r.pushCode("while (offset < buffer.length) {"),r.pushCode(d+" = dataView.getUint8(offset);");var c=r.addImport(f);r.pushCode("if ("+c+".call("+r.generateVariable()+", "+d+", buffer.subarray(offset))) break;"),r.pushCode("offset += 1;"),r.pushCode("}"),r.pushCode(o+" = buffer.subarray("+l+", offset);")}else if("eof"===this.options.readUntil)r.pushCode(o+" = buffer.subarray(offset);");else{var g=r.generateOption(this.options.length);r.pushCode(o+" = buffer.subarray(offset, offset + "+g+");"),r.pushCode("offset += "+g+";")}this.options.clone&&r.pushCode(o+" = buffer.constructor.from("+o+");")},a.prototype.generateArray=function(r){var o=r.generateOption(this.options.length),f=r.generateOption(this.options.lengthInBytes),l=this.options.type,d=r.generateTmpVariable(),c=r.generateVariable(this.varName),g=r.generateTmpVariable(),w=this.options.key,v="string"==typeof w;if(r.pushCode(v?c+" = {};":c+" = [];"),r.pushCode("function"==typeof this.options.readUntil?"do {":"eof"===this.options.readUntil?"for (var "+d+" = 0; offset < buffer.length; "+d+"++) {":void 0!==f?"for (var "+d+" = offset + "+f+"; offset < "+d+"; ) {":"for (var "+d+" = "+o+"; "+d+" > 0; "+d+"--) {"),"string"==typeof l)if(t[l]){var I=r.generateVariable(),P=r.generateTmpVariable();r.pushCode("var "+P+" = "+(n+l)+"(offset, {"),r.pushCode("$parent: "+I+","),r.pushCode("$root: "+I+".$root,"),!this.options.readUntil&&void 0===f&&r.pushCode("$index: "+o+" - "+d+","),r.pushCode("});"),r.pushCode("var "+g+" = "+P+".result; offset = "+P+".offset;"),l!==this.alias&&r.addReference(l)}else r.pushCode("var "+g+" = dataView.get"+h[l]+"(offset, "+u[l]+");"),r.pushCode("offset += "+s[l]+";");else l instanceof a&&(I=r.generateVariable(),r.pushCode("var "+g+" = {};"),r.pushScope(g),r.pushCode(g+".$parent = "+I+";"),r.pushCode(g+".$root = "+I+".$root;"),!this.options.readUntil&&void 0===f&&r.pushCode(g+".$index = "+o+" - "+d+";"),l.generate(r),r.pushCode("delete "+g+".$parent;"),r.pushCode("delete "+g+".$root;"),r.pushCode("delete "+g+".$index;"),r.popScope());if(r.pushCode(v?c+"["+g+"."+w+"] = "+g+";":c+".push("+g+");"),r.pushCode("}"),"function"==typeof this.options.readUntil){var nt=r.addImport(this.options.readUntil);r.pushCode("while (!"+nt+".call("+r.generateVariable()+", "+g+", buffer.subarray(offset)));")}},a.prototype.generateChoiceCase=function(r,o,f){if("string"==typeof f){var l=r.generateVariable(this.varName);if(t[f]){var g=r.generateTmpVariable();r.pushCode("var "+g+" = "+(n+f)+"(offset, {"),r.pushCode("$parent: "+l+".$parent,"),r.pushCode("$root: "+l+".$root,"),r.pushCode("});"),r.pushCode(l+" = "+g+".result; offset = "+g+".offset;"),f!==this.alias&&r.addReference(f)}else r.pushCode(l+" = dataView.get"+h[f]+"(offset, "+u[f]+");"),r.pushCode("offset += "+s[f])}else f instanceof a&&(r.pushPath(o),f.generate(r),r.popPath(o))},a.prototype.generateChoice=function(r){var o=this,f=r.generateOption(this.options.tag),l=r.generateVariable(this.varName);if(this.varName){r.pushCode(l+" = {};");var d=r.generateVariable();r.pushCode(l+".$parent = "+d+";"),r.pushCode(l+".$root = "+d+".$root;")}r.pushCode("switch("+f+") {"),Object.keys(this.options.choices).forEach(function(c){var g=o.options.choices[parseInt(c,10)];r.pushCode("case "+c+":"),o.generateChoiceCase(r,o.varName,g),r.pushCode("break;")}),r.pushCode("default:"),this.options.defaultChoice?this.generateChoiceCase(r,this.varName,this.options.defaultChoice):r.generateError('"Met undefined tag value " + '+f+' + " at choice"'),r.pushCode("}"),this.varName&&(r.pushCode("delete "+l+".$parent;"),r.pushCode("delete "+l+".$root;"))},a.prototype.generateNest=function(r){var o=r.generateVariable(this.varName);if(this.options.type instanceof a){if(this.varName){var f=r.generateVariable();r.pushCode(o+" = {};"),r.pushCode(o+".$parent = "+f+";"),r.pushCode(o+".$root = "+f+".$root;")}r.pushPath(this.varName),this.options.type.generate(r),r.popPath(this.varName),this.varName&&(r.pushCode("delete "+o+".$parent;"),r.pushCode("delete "+o+".$root;"))}else if(t[this.options.type]){f=r.generateVariable();var l=r.generateTmpVariable();r.pushCode("var "+l+" = "+(n+this.options.type)+"(offset, {"),r.pushCode("$parent: "+f+","),r.pushCode("$root: "+f+".$root,"),r.pushCode("});"),r.pushCode(o+" = "+l+".result; offset = "+l+".offset;"),this.options.type!==this.alias&&r.addReference(this.options.type)}},a.prototype.generateWrapper=function(r){var o=r.generateVariable(this.varName),f=r.generateTmpVariable();if("function"==typeof this.options.readUntil){var l=this.options.readUntil,d=r.generateTmpVariable(),c=r.generateTmpVariable();r.pushCode("var "+d+" = offset;"),r.pushCode("var "+c+" = 0;"),r.pushCode("while (offset < buffer.length) {"),r.pushCode(c+" = dataView.getUint8(offset);");var g=r.addImport(l);r.pushCode("if ("+g+".call("+r.generateVariable()+", "+c+", buffer.subarray(offset))) break;"),r.pushCode("offset += 1;"),r.pushCode("}"),r.pushCode(f+" = buffer.subarray("+d+", offset);")}else if("eof"===this.options.readUntil)r.pushCode(f+" = buffer.subarray(offset);");else{var w=r.generateOption(this.options.length);r.pushCode(f+" = buffer.subarray(offset, offset + "+w+");"),r.pushCode("offset += "+w+";")}this.options.clone&&r.pushCode(f+" = buffer.constructor.from("+f+");");var v=r.generateTmpVariable(),R=r.generateTmpVariable(),U=r.generateTmpVariable(),I=r.addImport(this.options.wrapper);if(r.pushCode(f+" = "+I+".call(this, "+f+").subarray(0);"),r.pushCode("var "+v+" = buffer;"),r.pushCode("var "+R+" = offset;"),r.pushCode("var "+U+" = dataView;"),r.pushCode("buffer = "+f+";"),r.pushCode("offset = 0;"),r.pushCode("dataView = new DataView(buffer.buffer, buffer.byteOffset, buffer.length);"),this.options.type instanceof a)this.varName&&r.pushCode(o+" = {};"),r.pushPath(this.varName),this.options.type.generate(r),r.popPath(this.varName);else if(t[this.options.type]){var P=r.generateTmpVariable();r.pushCode("var "+P+" = "+(n+this.options.type)+"(0);"),r.pushCode(o+" = "+P+".result;"),this.options.type!==this.alias&&r.addReference(this.options.type)}r.pushCode("buffer = "+v+";"),r.pushCode("dataView = "+U+";"),r.pushCode("offset = "+R+";")},a.prototype.generateFormatter=function(r,o,f){if("function"==typeof f){var l=r.addImport(f);r.pushCode(o+" = "+l+".call("+r.generateVariable()+", "+o+");")}},a.prototype.generatePointer=function(r){var o=this.options.type,f=r.generateOption(this.options.offset),l=r.generateTmpVariable(),d=r.generateVariable(this.varName);if(r.pushCode("var "+l+" = offset;"),r.pushCode("offset = "+f+";"),this.options.type instanceof a){var c=r.generateVariable();r.pushCode(d+" = {};"),r.pushCode(d+".$parent = "+c+";"),r.pushCode(d+".$root = "+c+".$root;"),r.pushPath(this.varName),this.options.type.generate(r),r.popPath(this.varName),r.pushCode("delete "+d+".$parent;"),r.pushCode("delete "+d+".$root;")}else if(t[this.options.type]){c=r.generateVariable();var g=r.generateTmpVariable();r.pushCode("var "+g+" = "+(n+this.options.type)+"(offset, {"),r.pushCode("$parent: "+c+","),r.pushCode("$root: "+c+".$root,"),r.pushCode("});"),r.pushCode(d+" = "+g+".result; offset = "+g+".offset;"),this.options.type!==this.alias&&r.addReference(this.options.type)}else Object.keys(s).indexOf(this.options.type)>=0&&(r.pushCode(d+" = dataView.get"+h[o]+"(offset, "+u[o]+");"),r.pushCode("offset += "+s[o]+";"));r.pushCode("offset = "+l+";")},a.prototype.generateSaveOffset=function(r){var o=r.generateVariable(this.varName);r.pushCode(o+" = offset")},a}();e.Parser=y});function T(){return(new Ge.Parser).endianess("little")}const Ke=function(){const i=function(){const i=T().uint16("from").uint16("to"),e=T().uint16("R").uint16("G").uint16("B"),t=T().uint16("_chars").string("text",{length:"_chars"});return T().uint16("_name").string("name",{length:"_name"}).uint16("_format").string("format",{length:"_format"}).uint16("_points").uint16("_limbs").uint16("_colors").array("points",{type:t,formatter:n=>n.map(s=>s.text),length:"_points"}).array("limbs",{type:i,length:"_limbs"}).array("colors",{type:e,length:"_colors"})}();return T().floatle("version").uint16("width").uint16("height").uint16("depth").uint16("_components").array("components",{type:i,length:"_components"}).saveOffset("headerLength")}();function Qe(i){const e=Ke.parse(i);let t;switch(Math.round(1e3*e.version)/1e3){case 0:t=function(i,e){return function(i){let e=T().int16("id");i.components.forEach(n=>{let s=T();Array.from(n.format).forEach(h=>{s=s.floatle(h)}),e=e.array(n.name,{type:s,length:n._points})});const t=T().uint16("_people").array("people",{type:e,length:"_people"});return T().seek(i.headerLength).uint16("fps").uint16("_frames").array("frames",{type:t,length:"_frames"})}(i).parse(e)}(e,i);break;case.1:t=function(i,e){const t=i.components.map(f=>f.points.length).reduce((f,l)=>f+l,0),n=Math.max(...i.components.map(f=>f.format.length))-1,h=T().seek(i.headerLength).uint16("fps").uint16("_frames").uint16("_people").parse(e),y=T().seek(i.headerLength+6).array("data",{type:"floatle",length:h._frames*h._people*t*n}).saveOffset("dataLength").parse(e),r=T().seek(y.dataLength).array("confidence",{type:"floatle",length:h._frames*h._people*t}).parse(e),o=[];for(let f=0;f<h._frames;f++){const l=[];o.push({people:l});for(let d=0;d<h._people;d++){const c={};l.push(c);let g=0;i.components.forEach(w=>{c[w.name]=[];for(let v=0;v<w.points.length;v++){const R=f*(h._people*t)+d*t;c[w.name].push({X:y.data[2*R+2*(g+v)],Y:y.data[2*R+2*(g+v)+1],C:r.confidence[R+g+v]})}g+=w.points.length})}}return Object.assign({},h,{frames:o})}(e,i);break;default:throw new Error("Parsing this body version is not implemented - "+e.version)}return{header:e,body:t}}class B{constructor(e,t){this.header=e,this.body=t}static from(e){const t=Qe(e);return new B(t.header,t.body)}static fromLocal(e){return(0,k.Z)(function*(){const t=(void 0)(e);return B.from(t)})()}static fromRemote(e){return(0,k.Z)(function*(){const t=yield fetch(e),n=p.from(yield t.arrayBuffer());return B.from(n)})()}}class pe{constructor(e){this.viewer=e}x(e){return e*(this.viewer.elWidth-2*this.viewer.elPadding.width)/this.viewer.pose.header.width+this.viewer.elPadding.width}y(e){return e*(this.viewer.elHeight-2*this.viewer.elPadding.height)/this.viewer.pose.header.height+this.viewer.elPadding.height}isJointValid(e){return e.C>0}renderJoints(e,t){return e.filter(this.isJointValid.bind(this)).map((n,s)=>this.renderJoint(s,n,t[s%t.length]))}renderLimbs(e,t,n){return e.map(({from:s,to:h})=>{const u=t[s],y=t[h];if(!this.isJointValid(u)||!this.isJointValid(y))return"";const a=n[s%n.length],r=n[h%n.length];return this.renderLimb(u,y,{R:(a.R+r.R)/2,G:(a.G+r.G)/2,B:(a.B+r.B)/2})})}renderFrame(e){return e.people.map(t=>this.viewer.pose.header.components.map(n=>{const s=t[n.name];return[this.renderLimbs(n.limbs,s,n.colors),this.renderJoints(s,n.colors)]}))}}class et extends pe{renderJoint(e,t,n){const{R:s,G:h,B:u}=n;return(0,b.h)("circle",{cx:t.X,cy:t.Y,r:4,class:"joint draggable",style:{fill:`rgb(${s}, ${h}, ${u})`,opacity:String(t.C)},"data-id":e})}renderLimb(e,t,n){const{R:s,G:h,B:u}=n;return(0,b.h)("line",{x1:e.X,y1:e.Y,x2:t.X,y2:t.Y,style:{stroke:`rgb(${s}, ${h}, ${u})`,opacity:String((e.C+t.C)/2)}})}render(e){return(0,b.h)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:`0 0 ${this.viewer.pose.header.width} ${this.viewer.pose.header.height}`,width:this.viewer.elWidth,height:this.viewer.elHeight},(0,b.h)("g",null,this.renderFrame(e)))}}class tt extends pe{renderJoint(e,t,n){const{R:s,G:h,B:u}=n;this.ctx.strokeStyle=`rgba(0, 0, 0, ${t.C})`,this.ctx.fillStyle=`rgba(${s}, ${h}, ${u}, ${t.C})`,this.ctx.lineWidth=1,this.ctx.beginPath(),this.ctx.arc(this.x(t.X),this.y(t.Y),4,0,2*Math.PI),this.ctx.fill(),this.ctx.stroke()}renderLimb(e,t,n){const{R:s,G:h,B:u}=n;this.ctx.strokeStyle=`rgba(${s}, ${h}, ${u}, ${(e.C+t.C)/2})`,this.ctx.lineWidth=8,this.ctx.beginPath(),this.ctx.moveTo(this.x(e.X),this.y(e.Y)),this.ctx.lineTo(this.x(t.X),this.y(t.Y)),this.ctx.stroke()}render(e){const t=()=>{const n=this.viewer.element.shadowRoot.querySelector("canvas");if(!n)throw new Error("Canvas isn't available before first render");n.width=this.viewer.elWidth,n.height=this.viewer.elHeight,this.ctx=n.getContext("2d"),this.viewer.background?(this.ctx.fillStyle=this.viewer.background,this.ctx.fillRect(0,0,n.width,n.height)):this.ctx.clearRect(0,0,n.width,n.height),this.renderFrame(e)};try{t()}catch(n){requestAnimationFrame(t)}return(0,b.h)("canvas",{width:this.viewer.elWidth,height:this.viewer.elHeight})}}const le=class{constructor(i){(0,b.r)(this,i),this.canplaythrough$=(0,b.c)(this,"canplaythrough$",7),this.ended$=(0,b.c)(this,"ended$",7),this.loadeddata$=(0,b.c)(this,"loadeddata$",7),this.loadedmetadata$=(0,b.c)(this,"loadedmetadata$",7),this.loadstart$=(0,b.c)(this,"loadstart$",7),this.pause$=(0,b.c)(this,"pause$",7),this.play$=(0,b.c)(this,"play$",7),this.svg=!1,this.width=null,this.height=null,this.background=null,this.loop=!1,this.autoplay=!0,this.playbackRate=1,this.currentTime=NaN,this.duration=NaN,this.ended=!1,this.paused=!0,this.readyState=0}componentWillLoad(){return this.renderer=this.svg?new et(this):new tt(this),this.srcChange()}componentDidLoad(){this.resizeObserver=new ResizeObserver(this.setDimensions.bind(this)),this.resizeObserver.observe(this.element)}srcChange(){var i=this;return(0,k.Z)(function*(){i.clearInterval(),i.setDimensions(),delete i.pose,i.src&&(i.loadstart$.emit(),i.pose=yield B.fromRemote(i.src),i.setDimensions(),i.loadedmetadata$.emit(),i.loadeddata$.emit(),i.canplaythrough$.emit(),i.duration=(i.pose.body.frames.length-1)/i.pose.body.fps,i.currentTime=0,i.autoplay&&i.play())})()}setDimensions(){if(this.elPadding={width:0,height:0},!this.pose)return this.elWidth=0,void(this.elHeight=0);if(!this.width&&!this.height)return this.elWidth=this.pose.header.width,void(this.elHeight=this.pose.header.height);const i=this.element.getBoundingClientRect(),e=(t,n)=>t.endsWith("px")?Number(t.slice(0,-2)):t.endsWith("%")?n*t.slice(0,-1)/100:Number(t);if(this.width&&this.height){this.elWidth=e(this.width,i.width),this.elHeight=e(this.height,i.height);const t=this.elWidth/this.elHeight,n=this.pose.header.width/this.pose.header.height;n>t?this.elPadding.height=(n-t)*this.elHeight/2:this.elPadding.width=(1/t-1/n)*this.elWidth/2}else this.width?(this.elWidth=e(this.width,i.width),this.elHeight=this.pose.header.height/this.pose.header.width*this.elWidth):this.height&&(this.elHeight=e(this.height,i.height),this.elWidth=this.pose.header.width/this.pose.header.height*this.elHeight)}syncMedia(i){var e=this;return(0,k.Z)(function*(){e.media=i,e.media.addEventListener("pause",e.pause.bind(e)),e.media.addEventListener("play",e.play.bind(e));const t=()=>e.currentTime=e.frameTime(e.media.currentTime);e.media.addEventListener("seek",t),e.media.addEventListener("timeupdate",t);const n=()=>e.playbackRate=e.media.playbackRate;e.media.addEventListener("ratechange",n),n(),e.clearInterval(),e.media.paused?e.pause():e.play()})()}nextFrame(){var i=this;return(0,k.Z)(function*(){const e=i.currentTime+1/i.pose.body.fps;e>i.duration?i.loop?i.currentTime=e%i.duration:(i.ended$.emit(),i.ended=!0):i.currentTime=e})()}frameTime(i){return this.pose?Math.floor(i*this.pose.body.fps)/this.pose.body.fps:0}play(){this.paused||this.clearInterval(),this.paused=!1,this.play$.emit(),this.currentTime>this.duration&&(this.currentTime=0);const i=1e3/(this.pose.body.fps*this.playbackRate);if(this.media)this.loopInterval=setInterval(()=>this.currentTime=this.frameTime(this.media.currentTime),i);else{let e=Date.now()/1e3;this.loopInterval=setInterval(()=>{const t=Date.now()/1e3;this.currentTime+=(t-e)*this.playbackRate,e=t,this.currentTime>this.duration&&(this.loop?this.currentTime=this.currentTime%this.duration:(this.ended$.emit(),this.ended=!0,this.clearInterval()))},i)}}pause(){this.paused=!0,this.pause$.emit(),this.clearInterval()}clearInterval(){this.loopInterval&&clearInterval(this.loopInterval)}disconnectedCallback(){this.clearInterval()}render(){if(!this.pose||isNaN(this.currentTime)||!this.renderer)return"";const e=Math.floor((this.currentTime>this.duration?this.duration:this.currentTime)*this.pose.body.fps);return(0,b.h)(b.H,null,this.renderer.render(this.pose.body.frames[e]))}get element(){return(0,b.g)(this)}static get watchers(){return{src:["srcChange"]}}};le.style=":host{display:inline-block}svg{max-width:100%}svg circle{stroke:black;stroke-width:1px;opacity:0.8}svg line{stroke-width:8px;opacity:0.8;stroke:black}canvas{display:block}"}}]);