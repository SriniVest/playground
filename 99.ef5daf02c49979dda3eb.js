(window.webpackJsonp=window.webpackJsonp||[]).push([[99],{ouXD:function(t,e,r){"use strict";r.r(e),r.d(e,"pose_viewer",function(){return ut});var i=r("VcDv");const n="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};var o=[],s=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,h=!1;function u(){h=!0;for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,r=t.length;e<r;++e)o[e]=t[e],s[t.charCodeAt(e)]=e;s["-".charCodeAt(0)]=62,s["_".charCodeAt(0)]=63}function f(t,e,r){for(var i,n=[],s=e;s<r;s+=3)n.push(o[(i=(t[s]<<16)+(t[s+1]<<8)+t[s+2])>>18&63]+o[i>>12&63]+o[i>>6&63]+o[63&i]);return n.join("")}function p(t,e,r,i,n){var o,s,a=8*n-i-1,h=(1<<a)-1,u=h>>1,f=-7,p=r?n-1:0,c=r?-1:1,l=t[e+p];for(p+=c,o=l&(1<<-f)-1,l>>=-f,f+=a;f>0;o=256*o+t[e+p],p+=c,f-=8);for(s=o&(1<<-f)-1,o>>=-f,f+=i;f>0;s=256*s+t[e+p],p+=c,f-=8);if(0===o)o=1-u;else{if(o===h)return s?NaN:1/0*(l?-1:1);s+=Math.pow(2,i),o-=u}return(l?-1:1)*s*Math.pow(2,o-i)}function c(t,e,r,i,n,o){var s,a,h,u=8*o-n-1,f=(1<<u)-1,p=f>>1,c=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,l=i?0:o-1,d=i?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=f):(s=Math.floor(Math.log(e)/Math.LN2),e*(h=Math.pow(2,-s))<1&&(s--,h*=2),(e+=s+p>=1?c/h:c*Math.pow(2,1-p))*h>=2&&(s++,h/=2),s+p>=f?(a=0,s=f):s+p>=1?(a=(e*h-1)*Math.pow(2,n),s+=p):(a=e*Math.pow(2,p-1)*Math.pow(2,n),s=0));n>=8;t[r+l]=255&a,l+=d,a/=256,n-=8);for(s=s<<n|a,u+=n;u>0;t[r+l]=255&s,l+=d,s/=256,u-=8);t[r+l-d]|=128*g}var l={}.toString,d=Array.isArray||function(t){return"[object Array]"==l.call(t)};function g(){return b.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function y(t,e){if(g()<e)throw new RangeError("Invalid typed array length");return b.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=b.prototype:(null===t&&(t=new b(e)),t.length=e),t}function b(t,e,r){if(!(b.TYPED_ARRAY_SUPPORT||this instanceof b))return new b(t,e,r);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return w(this,t)}return v(this,t,e,r)}function v(t,e,r,i){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,r,i){if(r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(i||0))throw new RangeError("'length' is out of bounds");return e=void 0===r&&void 0===i?new Uint8Array(e):void 0===i?new Uint8Array(e,r):new Uint8Array(e,r,i),b.TYPED_ARRAY_SUPPORT?(t=e).__proto__=b.prototype:t=C(t,e),t}(t,e,r,i):"string"==typeof e?function(t,e,r){if("string"==typeof r&&""!==r||(r="utf8"),!b.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var i=0|T(e,r),n=(t=y(t,i)).write(e,r);return n!==i&&(t=t.slice(0,n)),t}(t,e,r):function(t,e){if(N(e)){var r=0|E(e.length);return 0===(t=y(t,r)).length||e.copy(t,0,0,r),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(i=e.length)!=i?y(t,0):C(t,e);if("Buffer"===e.type&&d(e.data))return C(t,e.data)}var i;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function m(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function w(t,e){if(m(e),t=y(t,e<0?0:0|E(e)),!b.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function C(t,e){var r=e.length<0?0:0|E(e.length);t=y(t,r);for(var i=0;i<r;i+=1)t[i]=255&e[i];return t}function E(t){if(t>=g())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+g().toString(16)+" bytes");return 0|t}function N(t){return!(null==t||!t._isBuffer)}function T(t,e){if(N(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return X(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return K(t).length;default:if(i)return X(t).length;e=(""+e).toLowerCase(),i=!0}}function R(t,e,r){var i=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return Y(this,e,r);case"utf8":case"utf-8":return B(this,e,r);case"ascii":return L(this,e,r);case"latin1":case"binary":return j(this,e,r);case"base64":return $(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,e,r);default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}function x(t,e,r){var i=t[e];t[e]=t[r],t[r]=i}function A(t,e,r,i,n){if(0===t.length)return-1;if("string"==typeof r?(i=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=n?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(n)return-1;r=t.length-1}else if(r<0){if(!n)return-1;r=0}if("string"==typeof e&&(e=b.from(e,i)),N(e))return 0===e.length?-1:P(t,e,r,i,n);if("number"==typeof e)return e&=255,b.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?n?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):P(t,[e],r,i,n);throw new TypeError("val must be string, number or Buffer")}function P(t,e,r,i,n){var o,s=1,a=t.length,h=e.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(t.length<2||e.length<2)return-1;s=2,a/=2,h/=2,r/=2}function u(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(n){var f=-1;for(o=r;o<a;o++)if(u(t,o)===u(e,-1===f?0:o-f)){if(-1===f&&(f=o),o-f+1===h)return f*s}else-1!==f&&(o-=o-f),f=-1}else for(r+h>a&&(r=a-h),o=r;o>=0;o--){for(var p=!0,c=0;c<h;c++)if(u(t,o+c)!==u(e,c)){p=!1;break}if(p)return o}return-1}function _(t,e,r,i){r=Number(r)||0;var n=t.length-r;i?(i=Number(i))>n&&(i=n):i=n;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");i>o/2&&(i=o/2);for(var s=0;s<i;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[r+s]=a}return s}function U(t,e,r,i){return Z(X(e,t.length-r),t,r,i)}function O(t,e,r,i){return Z(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,i)}function k(t,e,r,i){return O(t,e,r,i)}function I(t,e,r,i){return Z(K(e),t,r,i)}function V(t,e,r,i){return Z(function(t,e){for(var r,i,n=[],o=0;o<t.length&&!((e-=2)<0);++o)i=(r=t.charCodeAt(o))>>8,n.push(r%256),n.push(i);return n}(e,t.length-r),t,r,i)}function $(t,e,r){return function(t){var e;h||u();for(var r=t.length,i=r%3,n="",s=[],a=16383,p=0,c=r-i;p<c;p+=a)s.push(f(t,p,p+a>c?c:p+a));return 1===i?(n+=o[(e=t[r-1])>>2],n+=o[e<<4&63],n+="=="):2===i&&(n+=o[(e=(t[r-2]<<8)+t[r-1])>>10],n+=o[e>>4&63],n+=o[e<<2&63],n+="="),s.push(n),s.join("")}(0===e&&r===t.length?t:t.slice(e,r))}function B(t,e,r){r=Math.min(t.length,r);for(var i=[],n=e;n<r;){var o,s,a,h,u=t[n],f=null,p=u>239?4:u>223?3:u>191?2:1;if(n+p<=r)switch(p){case 1:u<128&&(f=u);break;case 2:128==(192&(o=t[n+1]))&&(h=(31&u)<<6|63&o)>127&&(f=h);break;case 3:s=t[n+2],128==(192&(o=t[n+1]))&&128==(192&s)&&(h=(15&u)<<12|(63&o)<<6|63&s)>2047&&(h<55296||h>57343)&&(f=h);break;case 4:s=t[n+2],a=t[n+3],128==(192&(o=t[n+1]))&&128==(192&s)&&128==(192&a)&&(h=(15&u)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&h<1114112&&(f=h)}null===f?(f=65533,p=1):f>65535&&(i.push((f-=65536)>>>10&1023|55296),f=56320|1023&f),i.push(f),n+=p}return function(t){var e=t.length;if(e<=S)return String.fromCharCode.apply(String,t);for(var r="",i=0;i<e;)r+=String.fromCharCode.apply(String,t.slice(i,i+=S));return r}(i)}b.TYPED_ARRAY_SUPPORT=void 0===n.TYPED_ARRAY_SUPPORT||n.TYPED_ARRAY_SUPPORT,b.poolSize=8192,b._augment=function(t){return t.__proto__=b.prototype,t},b.from=function(t,e,r){return v(null,t,e,r)},b.TYPED_ARRAY_SUPPORT&&(b.prototype.__proto__=Uint8Array.prototype,b.__proto__=Uint8Array),b.alloc=function(t,e,r){return function(t,e,r,i){return m(e),e<=0?y(t,e):void 0!==r?"string"==typeof i?y(t,e).fill(r,i):y(t,e).fill(r):y(t,e)}(null,t,e,r)},b.allocUnsafe=function(t){return w(null,t)},b.allocUnsafeSlow=function(t){return w(null,t)},b.isBuffer=function(t){return null!=t&&(!!t._isBuffer||Q(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&Q(t.slice(0,0))}(t))},b.compare=function(t,e){if(!N(t)||!N(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,i=e.length,n=0,o=Math.min(r,i);n<o;++n)if(t[n]!==e[n]){r=t[n],i=e[n];break}return r<i?-1:i<r?1:0},b.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},b.concat=function(t,e){if(!d(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return b.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var i=b.allocUnsafe(e),n=0;for(r=0;r<t.length;++r){var o=t[r];if(!N(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(i,n),n+=o.length}return i},b.byteLength=T,b.prototype._isBuffer=!0,b.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)x(this,e,e+1);return this},b.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)x(this,e,e+3),x(this,e+1,e+2);return this},b.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)x(this,e,e+7),x(this,e+1,e+6),x(this,e+2,e+5),x(this,e+3,e+4);return this},b.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?B(this,0,t):R.apply(this,arguments)},b.prototype.equals=function(t){if(!N(t))throw new TypeError("Argument must be a Buffer");return this===t||0===b.compare(this,t)},b.prototype.inspect=function(){var t="";return this.length>0&&(t=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(t+=" ... ")),"<Buffer "+t+">"},b.prototype.compare=function(t,e,r,i,n){if(!N(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===i&&(i=0),void 0===n&&(n=this.length),e<0||r>t.length||i<0||n>this.length)throw new RangeError("out of range index");if(i>=n&&e>=r)return 0;if(i>=n)return-1;if(e>=r)return 1;if(this===t)return 0;for(var o=(n>>>=0)-(i>>>=0),s=(r>>>=0)-(e>>>=0),a=Math.min(o,s),h=this.slice(i,n),u=t.slice(e,r),f=0;f<a;++f)if(h[f]!==u[f]){o=h[f],s=u[f];break}return o<s?-1:s<o?1:0},b.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},b.prototype.indexOf=function(t,e,r){return A(this,t,e,r,!0)},b.prototype.lastIndexOf=function(t,e,r){return A(this,t,e,r,!1)},b.prototype.write=function(t,e,r,i){if(void 0===e)i="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)i=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===i&&(i="utf8")):(i=r,r=void 0)}var n=this.length-e;if((void 0===r||r>n)&&(r=n),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var o=!1;;)switch(i){case"hex":return _(this,t,e,r);case"utf8":case"utf-8":return U(this,t,e,r);case"ascii":return O(this,t,e,r);case"latin1":case"binary":return k(this,t,e,r);case"base64":return I(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return V(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}},b.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var S=4096;function L(t,e,r){var i="";r=Math.min(t.length,r);for(var n=e;n<r;++n)i+=String.fromCharCode(127&t[n]);return i}function j(t,e,r){var i="";r=Math.min(t.length,r);for(var n=e;n<r;++n)i+=String.fromCharCode(t[n]);return i}function Y(t,e,r){var i,n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var o="",s=e;s<r;++s)o+=(i=t[s])<16?"0"+i.toString(16):i.toString(16);return o}function D(t,e,r){for(var i=t.slice(e,r),n="",o=0;o<i.length;o+=2)n+=String.fromCharCode(i[o]+256*i[o+1]);return n}function M(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function F(t,e,r,i,n,o){if(!N(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>n||e<o)throw new RangeError('"value" argument is out of bounds');if(r+i>t.length)throw new RangeError("Index out of range")}function z(t,e,r,i){e<0&&(e=65535+e+1);for(var n=0,o=Math.min(t.length-r,2);n<o;++n)t[r+n]=(e&255<<8*(i?n:1-n))>>>8*(i?n:1-n)}function W(t,e,r,i){e<0&&(e=4294967295+e+1);for(var n=0,o=Math.min(t.length-r,4);n<o;++n)t[r+n]=e>>>8*(i?n:3-n)&255}function J(t,e,r,i,n,o){if(r+i>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function H(t,e,r,i,n){return n||J(t,0,r,4),c(t,e,r,i,23,4),r+4}function q(t,e,r,i,n){return n||J(t,0,r,8),c(t,e,r,i,52,8),r+8}b.prototype.slice=function(t,e){var r,i=this.length;if((t=~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),(e=void 0===e?i:~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),e<t&&(e=t),b.TYPED_ARRAY_SUPPORT)(r=this.subarray(t,e)).__proto__=b.prototype;else{var n=e-t;r=new b(n,void 0);for(var o=0;o<n;++o)r[o]=this[o+t]}return r},b.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||M(t,e,this.length);for(var i=this[t],n=1,o=0;++o<e&&(n*=256);)i+=this[t+o]*n;return i},b.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||M(t,e,this.length);for(var i=this[t+--e],n=1;e>0&&(n*=256);)i+=this[t+--e]*n;return i},b.prototype.readUInt8=function(t,e){return e||M(t,1,this.length),this[t]},b.prototype.readUInt16LE=function(t,e){return e||M(t,2,this.length),this[t]|this[t+1]<<8},b.prototype.readUInt16BE=function(t,e){return e||M(t,2,this.length),this[t]<<8|this[t+1]},b.prototype.readUInt32LE=function(t,e){return e||M(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},b.prototype.readUInt32BE=function(t,e){return e||M(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},b.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||M(t,e,this.length);for(var i=this[t],n=1,o=0;++o<e&&(n*=256);)i+=this[t+o]*n;return i>=(n*=128)&&(i-=Math.pow(2,8*e)),i},b.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||M(t,e,this.length);for(var i=e,n=1,o=this[t+--i];i>0&&(n*=256);)o+=this[t+--i]*n;return o>=(n*=128)&&(o-=Math.pow(2,8*e)),o},b.prototype.readInt8=function(t,e){return e||M(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},b.prototype.readInt16LE=function(t,e){e||M(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},b.prototype.readInt16BE=function(t,e){e||M(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},b.prototype.readInt32LE=function(t,e){return e||M(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},b.prototype.readInt32BE=function(t,e){return e||M(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},b.prototype.readFloatLE=function(t,e){return e||M(t,4,this.length),p(this,t,!0,23,4)},b.prototype.readFloatBE=function(t,e){return e||M(t,4,this.length),p(this,t,!1,23,4)},b.prototype.readDoubleLE=function(t,e){return e||M(t,8,this.length),p(this,t,!0,52,8)},b.prototype.readDoubleBE=function(t,e){return e||M(t,8,this.length),p(this,t,!1,52,8)},b.prototype.writeUIntLE=function(t,e,r,i){t=+t,e|=0,r|=0,i||F(this,t,e,r,Math.pow(2,8*r)-1,0);var n=1,o=0;for(this[e]=255&t;++o<r&&(n*=256);)this[e+o]=t/n&255;return e+r},b.prototype.writeUIntBE=function(t,e,r,i){t=+t,e|=0,r|=0,i||F(this,t,e,r,Math.pow(2,8*r)-1,0);var n=r-1,o=1;for(this[e+n]=255&t;--n>=0&&(o*=256);)this[e+n]=t/o&255;return e+r},b.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||F(this,t,e,1,255,0),b.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},b.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||F(this,t,e,2,65535,0),b.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):z(this,t,e,!0),e+2},b.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||F(this,t,e,2,65535,0),b.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):z(this,t,e,!1),e+2},b.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||F(this,t,e,4,4294967295,0),b.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):W(this,t,e,!0),e+4},b.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||F(this,t,e,4,4294967295,0),b.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):W(this,t,e,!1),e+4},b.prototype.writeIntLE=function(t,e,r,i){if(t=+t,e|=0,!i){var n=Math.pow(2,8*r-1);F(this,t,e,r,n-1,-n)}var o=0,s=1,a=0;for(this[e]=255&t;++o<r&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+r},b.prototype.writeIntBE=function(t,e,r,i){if(t=+t,e|=0,!i){var n=Math.pow(2,8*r-1);F(this,t,e,r,n-1,-n)}var o=r-1,s=1,a=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+r},b.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||F(this,t,e,1,127,-128),b.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},b.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||F(this,t,e,2,32767,-32768),b.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):z(this,t,e,!0),e+2},b.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||F(this,t,e,2,32767,-32768),b.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):z(this,t,e,!1),e+2},b.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||F(this,t,e,4,2147483647,-2147483648),b.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):W(this,t,e,!0),e+4},b.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||F(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),b.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):W(this,t,e,!1),e+4},b.prototype.writeFloatLE=function(t,e,r){return H(this,t,e,!0,r)},b.prototype.writeFloatBE=function(t,e,r){return H(this,t,e,!1,r)},b.prototype.writeDoubleLE=function(t,e,r){return q(this,t,e,!0,r)},b.prototype.writeDoubleBE=function(t,e,r){return q(this,t,e,!1,r)},b.prototype.copy=function(t,e,r,i){if(r||(r=0),i||0===i||(i=this.length),e>=t.length&&(e=t.length),e||(e=0),i>0&&i<r&&(i=r),i===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-r&&(i=t.length-e+r);var n,o=i-r;if(this===t&&r<e&&e<i)for(n=o-1;n>=0;--n)t[n+e]=this[n+r];else if(o<1e3||!b.TYPED_ARRAY_SUPPORT)for(n=0;n<o;++n)t[n+e]=this[n+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+o),e);return o},b.prototype.fill=function(t,e,r,i){if("string"==typeof t){if("string"==typeof e?(i=e,e=0,r=this.length):"string"==typeof r&&(i=r,r=this.length),1===t.length){var n=t.charCodeAt(0);n<256&&(t=n)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!b.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var o;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(o=e;o<r;++o)this[o]=t;else{var s=N(t)?t:X(new b(t,i).toString()),a=s.length;for(o=0;o<r-e;++o)this[o+e]=s[o%a]}return this};var G=/[^+\/0-9A-Za-z-_]/g;function X(t,e){var r;e=e||1/0;for(var i=t.length,n=null,o=[],s=0;s<i;++s){if((r=t.charCodeAt(s))>55295&&r<57344){if(!n){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===i){(e-=3)>-1&&o.push(239,191,189);continue}n=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),n=r;continue}r=65536+(n-55296<<10|r-56320)}else n&&(e-=3)>-1&&o.push(239,191,189);if(n=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function K(t){return function(t){var e,r,i,n,o,f;h||u();var p=t.length;if(p%4>0)throw new Error("Invalid string. Length must be a multiple of 4");f=new a(3*p/4-(o="="===t[p-2]?2:"="===t[p-1]?1:0)),i=o>0?p-4:p;var c=0;for(e=0,r=0;e<i;e+=4,r+=3)n=s[t.charCodeAt(e)]<<18|s[t.charCodeAt(e+1)]<<12|s[t.charCodeAt(e+2)]<<6|s[t.charCodeAt(e+3)],f[c++]=n>>16&255,f[c++]=n>>8&255,f[c++]=255&n;return 2===o?(n=s[t.charCodeAt(e)]<<2|s[t.charCodeAt(e+1)]>>4,f[c++]=255&n):1===o&&(n=s[t.charCodeAt(e)]<<10|s[t.charCodeAt(e+1)]<<4|s[t.charCodeAt(e+2)]>>2,f[c++]=n>>8&255,f[c++]=255&n),f}(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(G,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function Z(t,e,r,i){for(var n=0;n<i&&!(n+r>=e.length||n>=t.length);++n)e[n+r]=t[n];return n}function Q(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}function tt(t,e,r){return t(r={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}()}},r.exports),r.exports}!function(t){function e(){}function r(t,e){if(e=void 0===e?{fatal:!1}:e,-1===n.indexOf((t=void 0===t?"utf-8":t).toLowerCase()))throw new RangeError("Failed to construct 'TextDecoder': The encoding label provided ('"+t+"') is invalid.");if(e.fatal)throw Error("Failed to construct 'TextDecoder': the 'fatal' option is unsupported.")}function i(t){for(var e=0,r=Math.min(65536,t.length+1),i=new Uint16Array(r),n=[],o=0;;){var s=e<t.length;if(!s||o>=r-1){if(n.push(String.fromCharCode.apply(null,i.subarray(0,o))),!s)return n.join("");t=t.subarray(e),o=e=0}if(0==(128&(s=t[e++])))i[o++]=s;else if(192==(224&s)){var a=63&t[e++];i[o++]=(31&s)<<6|a}else if(224==(240&s)){a=63&t[e++];var h=63&t[e++];i[o++]=(31&s)<<12|a<<6|h}else 240==(248&s)&&(65535<(s=(7&s)<<18|(a=63&t[e++])<<12|(h=63&t[e++])<<6|63&t[e++])&&(i[o++]=(s-=65536)>>>10&1023|55296,s=56320|1023&s),i[o++]=s)}}if(t.TextEncoder&&t.TextDecoder)return!1;var n=["utf-8","utf8","unicode-1-1-utf-8"];Object.defineProperty(e.prototype,"encoding",{value:"utf-8"}),e.prototype.encode=function(t,e){if((e=void 0===e?{stream:!1}:e).stream)throw Error("Failed to encode: the 'stream' option is unsupported.");e=0;for(var r=t.length,i=0,n=Math.max(32,r+(r>>>1)+7),o=new Uint8Array(n>>>3<<3);e<r;){var s=t.charCodeAt(e++);if(55296<=s&&56319>=s){if(e<r){var a=t.charCodeAt(e);56320==(64512&a)&&(++e,s=((1023&s)<<10)+(1023&a)+65536)}if(55296<=s&&56319>=s)continue}if(i+4>o.length&&(n+=8,n=(n*=1+e/t.length*2)>>>3<<3,(a=new Uint8Array(n)).set(o),o=a),0==(4294967168&s))o[i++]=s;else{if(0==(4294965248&s))o[i++]=s>>>6&31|192;else if(0==(4294901760&s))o[i++]=s>>>12&15|224,o[i++]=s>>>6&63|128;else{if(0!=(4292870144&s))continue;o[i++]=s>>>18&7|240,o[i++]=s>>>12&63|128,o[i++]=s>>>6&63|128}o[i++]=63&s|128}}return o.slice?o.slice(0,i):o.subarray(0,i)},Object.defineProperty(r.prototype,"encoding",{value:"utf-8"}),Object.defineProperty(r.prototype,"fatal",{value:!1}),Object.defineProperty(r.prototype,"ignoreBOM",{value:!1});var o=i;b.from?o=function(t){return b.from(t.buffer,t.byteOffset,t.byteLength).toString("utf-8")}:"function"==typeof Blob&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&(o=function(t){var e=URL.createObjectURL(new Blob([t],{type:"text/plain;charset=UTF-8"}));try{var r=new XMLHttpRequest;return r.open("GET",e,!1),r.send(),r.responseText}catch(n){return i(t)}finally{URL.revokeObjectURL(e)}}),r.prototype.decode=function(t,e){if((e=void 0===e?{stream:!1}:e).stream)throw Error("Failed to decode: the 'stream' option is unsupported.");return t=t instanceof Uint8Array?t:t.buffer instanceof ArrayBuffer?new Uint8Array(t.buffer):new Uint8Array(t),o(t)},t.TextEncoder=e,t.TextDecoder=r}("undefined"!=typeof window?window:void 0!==n?n:void 0);var et=tt(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Context=void 0;var r=function(){function t(t){this.code="",this.scopes=[["vars"]],this.bitFields=[],this.tmpVariableCount=0,this.references={},this.imports=[],this.reverseImports=new Map,this.importPath=t}return t.prototype.generateVariable=function(t){var e=[];return e.push.apply(e,this.scopes[this.scopes.length-1]),t&&e.push(t),e.join(".")},t.prototype.generateOption=function(t){switch(typeof t){case"number":return t.toString();case"string":return this.generateVariable(t);case"function":return this.addImport(t)+".call("+this.generateVariable()+", vars)"}},t.prototype.generateError=function(t){this.pushCode("throw new Error("+t+");")},t.prototype.generateTmpVariable=function(){return"$tmp"+this.tmpVariableCount++},t.prototype.pushCode=function(t){this.code+=t+"\n"},t.prototype.pushPath=function(t){t&&this.scopes[this.scopes.length-1].push(t)},t.prototype.popPath=function(t){t&&this.scopes[this.scopes.length-1].pop()},t.prototype.pushScope=function(t){this.scopes.push([t])},t.prototype.popScope=function(){this.scopes.pop()},t.prototype.addImport=function(t){if(!this.importPath)return"("+t+")";var e=this.reverseImports.get(t);return e||(e=this.imports.push(t)-1,this.reverseImports.set(t,e)),this.importPath+"["+e+"]"},t.prototype.addReference=function(t){this.references[t]||(this.references[t]={resolved:!1,requested:!1})},t.prototype.markResolved=function(t){this.references[t].resolved=!0},t.prototype.markRequested=function(t){var e=this;t.forEach(function(t){e.references[t].requested=!0})},t.prototype.getUnresolvedReferences=function(){var t=this.references;return Object.keys(this.references).filter(function(e){return!t[e].resolved&&!t[e].requested})},t}();e.Context=r}),rt=tt(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Parser=void 0;var r={},i="___parser_",n={uint8:1,uint16le:2,uint16be:2,uint32le:4,uint32be:4,int8:1,int16le:2,int16be:2,int32le:4,int32be:4,int64be:8,int64le:8,uint64be:8,uint64le:8,floatle:4,floatbe:4,doublele:8,doublebe:8},o={uint8:"Uint8",uint16le:"Uint16",uint16be:"Uint16",uint32le:"Uint32",uint32be:"Uint32",int8:"Int8",int16le:"Int16",int16be:"Int16",int32le:"Int32",int32be:"Int32",int64be:"BigInt64",int64le:"BigInt64",uint64be:"BigUint64",uint64le:"BigUint64",floatle:"Float32",floatbe:"Float32",doublele:"Float64",doublebe:"Float64"},s={uint8:!1,uint16le:!0,uint16be:!1,uint32le:!0,uint32be:!1,int8:!1,int16le:!0,int16be:!1,int32le:!0,int32be:!1,int64be:!1,int64le:!0,uint64be:!1,uint64le:!0,floatle:!0,floatbe:!1,doublele:!0,doublebe:!1},a=function(){function t(){this.varName="",this.type="",this.options={},this.next=null,this.head=null,this.compiled=null,this.endian="be",this.constructorFn=null,this.alias=null}return t.start=function(){return new t},t.prototype.primitiveGenerateN=function(t,e){var r=o[t],i=s[t];e.pushCode(e.generateVariable(this.varName)+" = dataView.get"+r+"(offset, "+i+");"),e.pushCode("offset += "+n[t]+";")},t.prototype.primitiveN=function(t,e,r){return this.setNextParser(t,e,r)},t.prototype.useThisEndian=function(t){return t+this.endian.toLowerCase()},t.prototype.uint8=function(t,e){return this.primitiveN("uint8",t,e)},t.prototype.uint16=function(t,e){return this.primitiveN(this.useThisEndian("uint16"),t,e)},t.prototype.uint16le=function(t,e){return this.primitiveN("uint16le",t,e)},t.prototype.uint16be=function(t,e){return this.primitiveN("uint16be",t,e)},t.prototype.uint32=function(t,e){return this.primitiveN(this.useThisEndian("uint32"),t,e)},t.prototype.uint32le=function(t,e){return this.primitiveN("uint32le",t,e)},t.prototype.uint32be=function(t,e){return this.primitiveN("uint32be",t,e)},t.prototype.int8=function(t,e){return this.primitiveN("int8",t,e)},t.prototype.int16=function(t,e){return this.primitiveN(this.useThisEndian("int16"),t,e)},t.prototype.int16le=function(t,e){return this.primitiveN("int16le",t,e)},t.prototype.int16be=function(t,e){return this.primitiveN("int16be",t,e)},t.prototype.int32=function(t,e){return this.primitiveN(this.useThisEndian("int32"),t,e)},t.prototype.int32le=function(t,e){return this.primitiveN("int32le",t,e)},t.prototype.int32be=function(t,e){return this.primitiveN("int32be",t,e)},t.prototype.bigIntVersionCheck=function(){if(!DataView.prototype.getBigInt64)throw new Error("BigInt64 is unsupported in this runtime")},t.prototype.int64=function(t,e){return this.bigIntVersionCheck(),this.primitiveN(this.useThisEndian("int64"),t,e)},t.prototype.int64be=function(t,e){return this.bigIntVersionCheck(),this.primitiveN("int64be",t,e)},t.prototype.int64le=function(t,e){return this.bigIntVersionCheck(),this.primitiveN("int64le",t,e)},t.prototype.uint64=function(t,e){return this.bigIntVersionCheck(),this.primitiveN(this.useThisEndian("uint64"),t,e)},t.prototype.uint64be=function(t,e){return this.bigIntVersionCheck(),this.primitiveN("uint64be",t,e)},t.prototype.uint64le=function(t,e){return this.bigIntVersionCheck(),this.primitiveN("uint64le",t,e)},t.prototype.floatle=function(t,e){return this.primitiveN("floatle",t,e)},t.prototype.floatbe=function(t,e){return this.primitiveN("floatbe",t,e)},t.prototype.doublele=function(t,e){return this.primitiveN("doublele",t,e)},t.prototype.doublebe=function(t,e){return this.primitiveN("doublebe",t,e)},t.prototype.bitN=function(t,e,r){return r||(r={}),r.length=t,this.setNextParser("bit",e,r)},t.prototype.bit1=function(t,e){return this.bitN(1,t,e)},t.prototype.bit2=function(t,e){return this.bitN(2,t,e)},t.prototype.bit3=function(t,e){return this.bitN(3,t,e)},t.prototype.bit4=function(t,e){return this.bitN(4,t,e)},t.prototype.bit5=function(t,e){return this.bitN(5,t,e)},t.prototype.bit6=function(t,e){return this.bitN(6,t,e)},t.prototype.bit7=function(t,e){return this.bitN(7,t,e)},t.prototype.bit8=function(t,e){return this.bitN(8,t,e)},t.prototype.bit9=function(t,e){return this.bitN(9,t,e)},t.prototype.bit10=function(t,e){return this.bitN(10,t,e)},t.prototype.bit11=function(t,e){return this.bitN(11,t,e)},t.prototype.bit12=function(t,e){return this.bitN(12,t,e)},t.prototype.bit13=function(t,e){return this.bitN(13,t,e)},t.prototype.bit14=function(t,e){return this.bitN(14,t,e)},t.prototype.bit15=function(t,e){return this.bitN(15,t,e)},t.prototype.bit16=function(t,e){return this.bitN(16,t,e)},t.prototype.bit17=function(t,e){return this.bitN(17,t,e)},t.prototype.bit18=function(t,e){return this.bitN(18,t,e)},t.prototype.bit19=function(t,e){return this.bitN(19,t,e)},t.prototype.bit20=function(t,e){return this.bitN(20,t,e)},t.prototype.bit21=function(t,e){return this.bitN(21,t,e)},t.prototype.bit22=function(t,e){return this.bitN(22,t,e)},t.prototype.bit23=function(t,e){return this.bitN(23,t,e)},t.prototype.bit24=function(t,e){return this.bitN(24,t,e)},t.prototype.bit25=function(t,e){return this.bitN(25,t,e)},t.prototype.bit26=function(t,e){return this.bitN(26,t,e)},t.prototype.bit27=function(t,e){return this.bitN(27,t,e)},t.prototype.bit28=function(t,e){return this.bitN(28,t,e)},t.prototype.bit29=function(t,e){return this.bitN(29,t,e)},t.prototype.bit30=function(t,e){return this.bitN(30,t,e)},t.prototype.bit31=function(t,e){return this.bitN(31,t,e)},t.prototype.bit32=function(t,e){return this.bitN(32,t,e)},t.prototype.namely=function(t){return r[t]=this,this.alias=t,this},t.prototype.skip=function(t,e){return this.seek(t,e)},t.prototype.seek=function(t,e){if(e&&e.assert)throw new Error("assert option on seek is not allowed.");return this.setNextParser("seek","",{length:t})},t.prototype.string=function(t,e){if(!e.zeroTerminated&&!e.length&&!e.greedy)throw new Error("Neither length, zeroTerminated, nor greedy is defined for string.");if((e.zeroTerminated||e.length)&&e.greedy)throw new Error("greedy is mutually exclusive with length and zeroTerminated for string.");if(e.stripNull&&!e.length&&!e.greedy)throw new Error("Length or greedy must be defined if stripNull is defined.");return e.encoding=e.encoding||"utf8",this.setNextParser("string",t,e)},t.prototype.buffer=function(t,e){if(!e.length&&!e.readUntil)throw new Error("Length nor readUntil is defined in buffer parser");return this.setNextParser("buffer",t,e)},t.prototype.wrapped=function(t,e){if(!e.length&&!e.readUntil)throw new Error("Length nor readUntil is defined in buffer parser");if(!e.wrapper||!e.type)throw new Error("Both wrapper and type must be defined in wrapper parser");return this.setNextParser("wrapper",t,e)},t.prototype.array=function(t,e){if(!e.readUntil&&!e.length&&!e.lengthInBytes)throw new Error("Length option of array is not defined.");if(!e.type)throw new Error("Type option of array is not defined.");if("string"==typeof e.type&&!r[e.type]&&Object.keys(n).indexOf(e.type)<0)throw new Error('Specified primitive type "'+e.type+'" is not supported.');return this.setNextParser("array",t,e)},t.prototype.choice=function(t,e){if("object"!=typeof e&&"object"==typeof t&&(e=t,t=null),!e.tag)throw new Error("Tag option of array is not defined.");if(!e.choices)throw new Error("Choices option of array is not defined.");return Object.keys(e.choices).forEach(function(i){var o=parseInt(i,10),s=e.choices[o];if(isNaN(o))throw new Error("Key of choices must be a number.");if(!s)throw new Error("Choice Case "+i+" of "+t+" is not valid.");if("string"==typeof s&&!r[s]&&Object.keys(n).indexOf(s)<0)throw new Error('Specified primitive type "'+s+'" is not supported.')}),this.setNextParser("choice",t,e)},t.prototype.nest=function(e,i){if("object"!=typeof i&&"object"==typeof e&&(i=e,e=null),!i.type)throw new Error("Type option of nest is not defined.");if(!(i.type instanceof t||r[i.type]))throw new Error("Type option of nest must be a Parser object.");if(!(i.type instanceof t||e))throw new Error("options.type must be a object if variable name is omitted.");return this.setNextParser("nest",e,i)},t.prototype.pointer=function(e,i){if(!i.offset)throw new Error("Offset option of pointer is not defined.");if(!i.type)throw new Error("Type option of pointer is not defined.");if("string"==typeof i.type){if(Object.keys(n).indexOf(i.type)<0&&!r[i.type])throw new Error('Specified type "'+i.type+'" is not supported.')}else if(!(i.type instanceof t))throw new Error("Type option of pointer must be a string or a Parser object.");return this.setNextParser("pointer",e,i)},t.prototype.saveOffset=function(t,e){return this.setNextParser("saveOffset",t,e)},t.prototype.endianess=function(t){switch(t.toLowerCase()){case"little":this.endian="le";break;case"big":this.endian="be";break;default:throw new Error("Invalid endianess: "+t)}return this},t.prototype.create=function(t){if(!(t instanceof Function))throw new Error("Constructor must be a Function object.");return this.constructorFn=t,this},t.prototype.getContext=function(t){var e=new et.Context(t);return e.pushCode("var dataView = new DataView(buffer.buffer, buffer.byteOffset, buffer.length);"),this.alias?(this.addAliasedCode(e),e.pushCode("return "+(i+this.alias)+"(0).result;")):this.addRawCode(e),e},t.prototype.getCode=function(){return this.getContext().code},t.prototype.addRawCode=function(t){t.pushCode("var offset = 0;"),t.pushCode("var vars = "+(this.constructorFn?"new constructorFn()":"{}")+";"),t.pushCode("vars.$parent = null;"),t.pushCode("vars.$root = vars;"),this.generate(t),this.resolveReferences(t),t.pushCode("delete vars.$parent;"),t.pushCode("delete vars.$root;"),t.pushCode("return vars;")},t.prototype.addAliasedCode=function(t){return t.pushCode("function "+(i+this.alias)+"(offset, context) {"),t.pushCode("var vars = "+(this.constructorFn?"new constructorFn()":"{}")+";"),t.pushCode("var ctx = Object.assign({$parent: null, $root: vars}, context || {});"),t.pushCode("vars = Object.assign(vars, ctx);"),this.generate(t),t.markResolved(this.alias),this.resolveReferences(t),t.pushCode("Object.keys(ctx).forEach(function (item) { delete vars[item]; });"),t.pushCode("return { offset: offset, result: vars };"),t.pushCode("}"),t},t.prototype.resolveReferences=function(t){var e=t.getUnresolvedReferences();t.markRequested(e),e.forEach(function(e){r[e].addAliasedCode(t)})},t.prototype.compile=function(){var t="imports",e=this.getContext(t);this.compiled=new Function(t,"TextDecoder","return function (buffer, constructorFn) { "+e.code+" };")(e.imports,TextDecoder)},t.prototype.sizeOf=function(){var e=NaN;if(Object.keys(n).indexOf(this.type)>=0)e=n[this.type];else if("string"===this.type&&"number"==typeof this.options.length)e=this.options.length;else if("buffer"===this.type&&"number"==typeof this.options.length)e=this.options.length;else if("array"===this.type&&"number"==typeof this.options.length){var r=NaN;"string"==typeof this.options.type?r=n[this.options.type]:this.options.type instanceof t&&(r=this.options.type.sizeOf()),e=this.options.length*r}else"seek"===this.type?e=this.options.length:"nest"===this.type?e=this.options.type.sizeOf():this.type||(e=0);return this.next&&(e+=this.next.sizeOf()),e},t.prototype.parse=function(t){return this.compiled||this.compile(),this.compiled(t,this.constructorFn)},t.prototype.setNextParser=function(e,r,i){var n=new t;return n.type=e,n.varName=r,n.options=i||n.options,n.endian=this.endian,this.head?this.head.next=n:this.next=n,this.head=n,this},t.prototype.generate=function(t){if(this.type){switch(this.type){case"uint8":case"uint16le":case"uint16be":case"uint32le":case"uint32be":case"int8":case"int16le":case"int16be":case"int32le":case"int32be":case"int64be":case"int64le":case"uint64be":case"uint64le":case"floatle":case"floatbe":case"doublele":case"doublebe":this.primitiveGenerateN(this.type,t);break;case"bit":this.generateBit(t);break;case"string":this.generateString(t);break;case"buffer":this.generateBuffer(t);break;case"seek":this.generateSeek(t);break;case"nest":this.generateNest(t);break;case"array":this.generateArray(t);break;case"choice":this.generateChoice(t);break;case"pointer":this.generatePointer(t);break;case"saveOffset":this.generateSaveOffset(t);break;case"wrapper":this.generateWrapper(t)}this.generateAssert(t)}var e=t.generateVariable(this.varName);return this.options.formatter&&this.generateFormatter(t,e,this.options.formatter),this.generateNext(t)},t.prototype.generateAssert=function(t){if(this.options.assert){var e=t.generateVariable(this.varName);switch(typeof this.options.assert){case"function":var r=t.addImport(this.options.assert);t.pushCode("if (!"+r+".call(vars, "+e+")) {");break;case"number":t.pushCode("if ("+this.options.assert+" !== "+e+") {");break;case"string":t.pushCode('if ("'+this.options.assert+'" !== '+e+") {");break;default:throw new Error("Assert option supports only strings, numbers and assert functions.")}t.generateError('"Assert error: '+e+' is " + '+this.options.assert),t.pushCode("}")}},t.prototype.generateNext=function(t){return this.next&&(t=this.next.generate(t)),t},t.prototype.generateBit=function(t){var e=JSON.parse(JSON.stringify(this));if(e.varName=t.generateVariable(e.varName),t.bitFields.push(e),!this.next||this.next&&["bit","nest"].indexOf(this.next.type)<0){var r=0;t.bitFields.forEach(function(t){return r+=t.options.length});var i=t.generateTmpVariable();if(r<=8)t.pushCode("var "+i+" = dataView.getUint8(offset);"),r=8;else if(r<=16)t.pushCode("var "+i+" = dataView.getUint16(offset);"),r=16;else if(r<=24){var n=t.generateTmpVariable(),o=t.generateTmpVariable();t.pushCode("var "+n+" = dataView.getUint16(offset);"),t.pushCode("var "+o+" = dataView.getUint8(offset + 2);"),t.pushCode("var "+i+" = ("+n+" << 8) | "+o+";"),r=24}else{if(!(r<=32))throw new Error("Currently, bit field sequence longer than 4-bytes is not supported.");t.pushCode("var "+i+" = dataView.getUint32(offset);"),r=32}t.pushCode("offset += "+r/8+";");var s=0,a="be"===this.endian;t.bitFields.forEach(function(e){var n=e.options.length;t.pushCode(e.varName+" = "+i+" >> "+(a?r-s-n:s)+" & "+((1<<n)-1)+";"),s+=n}),t.bitFields=[]}},t.prototype.generateSeek=function(t){var e=t.generateOption(this.options.length);t.pushCode("offset += "+e+";")},t.prototype.generateString=function(t){var e=t.generateVariable(this.varName),r=t.generateTmpVariable(),i=this.options.encoding,n="hex"===i.toLowerCase(),o='b => b.toString(16).padStart(2, "0")';if(this.options.length&&this.options.zeroTerminated){var s=this.options.length;t.pushCode("var "+r+" = offset;"),t.pushCode("while(dataView.getUint8(offset++) !== 0 && offset - "+r+" < "+s+");");var a="offset - "+r+" < "+s+" ? offset - 1 : offset";t.pushCode(n?e+" = Array.from(buffer.subarray("+r+", "+a+"), "+o+").join('');":e+" = new TextDecoder('"+i+"').decode(buffer.subarray("+r+", "+a+"));")}else this.options.length?(s=t.generateOption(this.options.length),t.pushCode(n?e+" = Array.from(buffer.subarray(offset, offset + "+s+"), "+o+").join('');":e+" = new TextDecoder('"+i+"').decode(buffer.subarray(offset, offset + "+s+"));"),t.pushCode("offset += "+s+";")):this.options.zeroTerminated?(t.pushCode("var "+r+" = offset;"),t.pushCode("while(dataView.getUint8(offset++) !== 0);"),t.pushCode(n?e+" = Array.from(buffer.subarray("+r+", offset - 1), "+o+").join('');":e+" = new TextDecoder('"+i+"').decode(buffer.subarray("+r+", offset - 1));")):this.options.greedy&&(t.pushCode("var "+r+" = offset;"),t.pushCode("while(buffer.length > offset++);"),t.pushCode(n?e+" = Array.from(buffer.subarray("+r+", offset), "+o+").join('');":e+" = new TextDecoder('"+i+"').decode(buffer.subarray("+r+", offset));"));this.options.stripNull&&t.pushCode(e+" = "+e+".replace(/\\x00+$/g, '')")},t.prototype.generateBuffer=function(t){var e=t.generateVariable(this.varName);if("function"==typeof this.options.readUntil){var r=this.options.readUntil,i=t.generateTmpVariable(),n=t.generateTmpVariable();t.pushCode("var "+i+" = offset;"),t.pushCode("var "+n+" = 0;"),t.pushCode("while (offset < buffer.length) {"),t.pushCode(n+" = dataView.getUint8(offset);");var o=t.addImport(r);t.pushCode("if ("+o+".call("+t.generateVariable()+", "+n+", buffer.subarray(offset))) break;"),t.pushCode("offset += 1;"),t.pushCode("}"),t.pushCode(e+" = buffer.subarray("+i+", offset);")}else if("eof"===this.options.readUntil)t.pushCode(e+" = buffer.subarray(offset);");else{var s=t.generateOption(this.options.length);t.pushCode(e+" = buffer.subarray(offset, offset + "+s+");"),t.pushCode("offset += "+s+";")}this.options.clone&&t.pushCode(e+" = buffer.constructor.from("+e+");")},t.prototype.generateArray=function(e){var a=e.generateOption(this.options.length),h=e.generateOption(this.options.lengthInBytes),u=this.options.type,f=e.generateTmpVariable(),p=e.generateVariable(this.varName),c=e.generateTmpVariable(),l=this.options.key,d="string"==typeof l;if(e.pushCode(d?p+" = {};":p+" = [];"),e.pushCode("function"==typeof this.options.readUntil?"do {":"eof"===this.options.readUntil?"for (var "+f+" = 0; offset < buffer.length; "+f+"++) {":void 0!==h?"for (var "+f+" = offset + "+h+"; offset < "+f+"; ) {":"for (var "+f+" = "+a+"; "+f+" > 0; "+f+"--) {"),"string"==typeof u)if(r[u]){var g=e.generateVariable(),y=e.generateTmpVariable();e.pushCode("var "+y+" = "+(i+u)+"(offset, {"),e.pushCode("$parent: "+g+","),e.pushCode("$root: "+g+".$root,"),this.options.readUntil||void 0!==h||e.pushCode("$index: "+a+" - "+f+","),e.pushCode("});"),e.pushCode("var "+c+" = "+y+".result; offset = "+y+".offset;"),u!==this.alias&&e.addReference(u)}else e.pushCode("var "+c+" = dataView.get"+o[u]+"(offset, "+s[u]+");"),e.pushCode("offset += "+n[u]+";");else u instanceof t&&(g=e.generateVariable(),e.pushCode("var "+c+" = {};"),e.pushScope(c),e.pushCode(c+".$parent = "+g+";"),e.pushCode(c+".$root = "+g+".$root;"),this.options.readUntil||void 0!==h||e.pushCode(c+".$index = "+a+" - "+f+";"),u.generate(e),e.pushCode("delete "+c+".$parent;"),e.pushCode("delete "+c+".$root;"),e.pushCode("delete "+c+".$index;"),e.popScope());if(e.pushCode(d?p+"["+c+"."+l+"] = "+c+";":p+".push("+c+");"),e.pushCode("}"),"function"==typeof this.options.readUntil){var b=e.addImport(this.options.readUntil);e.pushCode("while (!"+b+".call("+e.generateVariable()+", "+c+", buffer.subarray(offset)));")}},t.prototype.generateChoiceCase=function(e,a,h){if("string"==typeof h){var u=e.generateVariable(this.varName);if(r[h]){var f=e.generateTmpVariable();e.pushCode("var "+f+" = "+(i+h)+"(offset, {"),e.pushCode("$parent: "+u+".$parent,"),e.pushCode("$root: "+u+".$root,"),e.pushCode("});"),e.pushCode(u+" = "+f+".result; offset = "+f+".offset;"),h!==this.alias&&e.addReference(h)}else e.pushCode(u+" = dataView.get"+o[h]+"(offset, "+s[h]+");"),e.pushCode("offset += "+n[h])}else h instanceof t&&(e.pushPath(a),h.generate(e),e.popPath(a))},t.prototype.generateChoice=function(t){var e=this,r=t.generateOption(this.options.tag),i=t.generateVariable(this.varName);if(this.varName){t.pushCode(i+" = {};");var n=t.generateVariable();t.pushCode(i+".$parent = "+n+";"),t.pushCode(i+".$root = "+n+".$root;")}t.pushCode("switch("+r+") {"),Object.keys(this.options.choices).forEach(function(r){var i=e.options.choices[parseInt(r,10)];t.pushCode("case "+r+":"),e.generateChoiceCase(t,e.varName,i),t.pushCode("break;")}),t.pushCode("default:"),this.options.defaultChoice?this.generateChoiceCase(t,this.varName,this.options.defaultChoice):t.generateError('"Met undefined tag value " + '+r+' + " at choice"'),t.pushCode("}"),this.varName&&(t.pushCode("delete "+i+".$parent;"),t.pushCode("delete "+i+".$root;"))},t.prototype.generateNest=function(e){var n=e.generateVariable(this.varName);if(this.options.type instanceof t){if(this.varName){var o=e.generateVariable();e.pushCode(n+" = {};"),e.pushCode(n+".$parent = "+o+";"),e.pushCode(n+".$root = "+o+".$root;")}e.pushPath(this.varName),this.options.type.generate(e),e.popPath(this.varName),this.varName&&(e.pushCode("delete "+n+".$parent;"),e.pushCode("delete "+n+".$root;"))}else if(r[this.options.type]){o=e.generateVariable();var s=e.generateTmpVariable();e.pushCode("var "+s+" = "+(i+this.options.type)+"(offset, {"),e.pushCode("$parent: "+o+","),e.pushCode("$root: "+o+".$root,"),e.pushCode("});"),e.pushCode(n+" = "+s+".result; offset = "+s+".offset;"),this.options.type!==this.alias&&e.addReference(this.options.type)}},t.prototype.generateWrapper=function(e){var n=e.generateVariable(this.varName),o=e.generateTmpVariable();if("function"==typeof this.options.readUntil){var s=this.options.readUntil,a=e.generateTmpVariable(),h=e.generateTmpVariable();e.pushCode("var "+a+" = offset;"),e.pushCode("var "+h+" = 0;"),e.pushCode("while (offset < buffer.length) {"),e.pushCode(h+" = dataView.getUint8(offset);");var u=e.addImport(s);e.pushCode("if ("+u+".call("+e.generateVariable()+", "+h+", buffer.subarray(offset))) break;"),e.pushCode("offset += 1;"),e.pushCode("}"),e.pushCode(o+" = buffer.subarray("+a+", offset);")}else if("eof"===this.options.readUntil)e.pushCode(o+" = buffer.subarray(offset);");else{var f=e.generateOption(this.options.length);e.pushCode(o+" = buffer.subarray(offset, offset + "+f+");"),e.pushCode("offset += "+f+";")}this.options.clone&&e.pushCode(o+" = buffer.constructor.from("+o+");");var p=e.generateTmpVariable(),c=e.generateTmpVariable(),l=e.generateTmpVariable(),d=e.addImport(this.options.wrapper);if(e.pushCode(o+" = "+d+".call(this, "+o+").subarray(0);"),e.pushCode("var "+p+" = buffer;"),e.pushCode("var "+c+" = offset;"),e.pushCode("var "+l+" = dataView;"),e.pushCode("buffer = "+o+";"),e.pushCode("offset = 0;"),e.pushCode("dataView = new DataView(buffer.buffer, buffer.byteOffset, buffer.length);"),this.options.type instanceof t)this.varName&&e.pushCode(n+" = {};"),e.pushPath(this.varName),this.options.type.generate(e),e.popPath(this.varName);else if(r[this.options.type]){var g=e.generateTmpVariable();e.pushCode("var "+g+" = "+(i+this.options.type)+"(0);"),e.pushCode(n+" = "+g+".result;"),this.options.type!==this.alias&&e.addReference(this.options.type)}e.pushCode("buffer = "+p+";"),e.pushCode("dataView = "+l+";"),e.pushCode("offset = "+c+";")},t.prototype.generateFormatter=function(t,e,r){if("function"==typeof r){var i=t.addImport(r);t.pushCode(e+" = "+i+".call("+t.generateVariable()+", "+e+");")}},t.prototype.generatePointer=function(e){var a=this.options.type,h=e.generateOption(this.options.offset),u=e.generateTmpVariable(),f=e.generateVariable(this.varName);if(e.pushCode("var "+u+" = offset;"),e.pushCode("offset = "+h+";"),this.options.type instanceof t){var p=e.generateVariable();e.pushCode(f+" = {};"),e.pushCode(f+".$parent = "+p+";"),e.pushCode(f+".$root = "+p+".$root;"),e.pushPath(this.varName),this.options.type.generate(e),e.popPath(this.varName),e.pushCode("delete "+f+".$parent;"),e.pushCode("delete "+f+".$root;")}else if(r[this.options.type]){p=e.generateVariable();var c=e.generateTmpVariable();e.pushCode("var "+c+" = "+(i+this.options.type)+"(offset, {"),e.pushCode("$parent: "+p+","),e.pushCode("$root: "+p+".$root,"),e.pushCode("});"),e.pushCode(f+" = "+c+".result; offset = "+c+".offset;"),this.options.type!==this.alias&&e.addReference(this.options.type)}else Object.keys(n).indexOf(this.options.type)>=0&&(e.pushCode(f+" = dataView.get"+o[a]+"(offset, "+s[a]+");"),e.pushCode("offset += "+n[a]+";"));e.pushCode("offset = "+u+";")},t.prototype.generateSaveOffset=function(t){var e=t.generateVariable(this.varName);t.pushCode(e+" = offset")},t}();e.Parser=a});function it(){return(new rt.Parser).endianess("little")}const nt=function(){const t=function(){const t=it().uint16("from").uint16("to"),e=it().uint16("R").uint16("G").uint16("B"),r=it().uint16("_chars").string("text",{length:"_chars"});return it().uint16("_name").string("name",{length:"_name"}).uint16("_format").string("format",{length:"_format"}).uint16("_points").uint16("_limbs").uint16("_colors").array("points",{type:r,formatter:t=>t.map(t=>t.text),length:"_points"}).array("limbs",{type:t,length:"_limbs"}).array("colors",{type:e,length:"_colors"})}();return it().floatle("version").uint16("width").uint16("height").uint16("depth").uint16("_components").array("components",{type:t,length:"_components"}).saveOffset("headerLength")}();class ot{constructor(t,e){this.header=t,this.body=e}static from(t){const e=function(t){const e=nt.parse(t);let r;switch(Math.round(1e3*e.version)/1e3){case 0:r=function(t,e){return function(t){let e=it().int16("id");t.components.forEach(t=>{let r=it();Array.from(t.format).forEach(t=>{r=r.floatle(t)}),e=e.array(t.name,{type:r,length:t._points})});const r=it().uint16("_people").array("people",{type:e,length:"_people"});return it().seek(t.headerLength).uint16("fps").uint16("_frames").array("frames",{type:r,length:"_frames"})}(t).parse(e)}(e,t);break;case.1:r=function(t,e){const r=t.components.map(t=>t.points.length).reduce((t,e)=>t+e,0),i=Math.max(...t.components.map(t=>t.format.length))-1,n=it().seek(t.headerLength).uint16("fps").uint16("_frames").uint16("_people").parse(e),o=it().seek(t.headerLength+6).array("data",{type:"floatle",length:n._frames*n._people*r*i}).saveOffset("dataLength").parse(e),s=it().seek(o.dataLength).array("confidence",{type:"floatle",length:n._frames*n._people*r}).parse(e),a=[];for(let h=0;h<n._frames;h++){const e=[];a.push({people:e});for(let i=0;i<n._people;i++){const a={};e.push(a);let u=0;t.components.forEach(t=>{a[t.name]=[];for(let e=0;e<t.points.length;e++){const f=h*(n._people*r)+i*r;a[t.name].push({X:o.data[2*f+2*(u+e)],Y:o.data[2*f+2*(u+e)+1],C:s.confidence[f+u+e]})}u+=t.points.length})}}return Object.assign({},n,{frames:a})}(e,t);break;default:throw new Error("Parsing this body version is not implemented - "+e.version)}return{header:e,body:r}}(t);return new ot(e.header,e.body)}static async fromLocal(t){const e=(void 0)(t);return ot.from(e)}static async fromRemote(t){const e=await fetch(t),r=b.from(await e.arrayBuffer());return ot.from(r)}}class st{constructor(t){this.viewer=t}x(t){return t*(this.viewer.elWidth-2*this.viewer.elPadding.width)/this.viewer.pose.header.width+this.viewer.elPadding.width}y(t){return t*(this.viewer.elHeight-2*this.viewer.elPadding.height)/this.viewer.pose.header.height+this.viewer.elPadding.height}isJointValid(t){return t.C>0}renderJoints(t,e){return t.filter(this.isJointValid.bind(this)).map((t,r)=>this.renderJoint(r,t,e[r%e.length]))}renderLimbs(t,e,r){return t.map(({from:t,to:i})=>{const n=e[t],o=e[i];if(!this.isJointValid(n)||!this.isJointValid(o))return"";const s=r[t%r.length],a=r[i%r.length];return this.renderLimb(n,o,{R:(s.R+a.R)/2,G:(s.G+a.G)/2,B:(s.B+a.B)/2})})}renderFrame(t){return t.people.map(t=>this.viewer.pose.header.components.map(e=>{const r=t[e.name];return[this.renderLimbs(e.limbs,r,e.colors),this.renderJoints(r,e.colors)]}))}}class at extends st{renderJoint(t,e,r){const{R:n,G:o,B:s}=r;return Object(i.e)("circle",{cx:e.X,cy:e.Y,r:4,class:"joint draggable",style:{fill:`rgb(${n}, ${o}, ${s})`,opacity:String(e.C)},"data-id":t})}renderLimb(t,e,r){const{R:n,G:o,B:s}=r;return Object(i.e)("line",{x1:t.X,y1:t.Y,x2:e.X,y2:e.Y,style:{stroke:`rgb(${n}, ${o}, ${s})`,opacity:String((t.C+e.C)/2)}})}render(t){const e=`0 0 ${this.viewer.pose.header.width} ${this.viewer.pose.header.height}`;return Object(i.e)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:e,width:this.viewer.elWidth,height:this.viewer.elHeight},Object(i.e)("g",null,this.renderFrame(t)))}}class ht extends st{renderJoint(t,e,r){const{R:i,G:n,B:o}=r;this.ctx.strokeStyle=`rgba(0, 0, 0, ${e.C})`,this.ctx.fillStyle=`rgba(${i}, ${n}, ${o}, ${e.C})`,this.ctx.lineWidth=1,this.ctx.beginPath(),this.ctx.arc(this.x(e.X),this.y(e.Y),4,0,2*Math.PI),this.ctx.fill(),this.ctx.stroke()}renderLimb(t,e,r){const{R:i,G:n,B:o}=r;this.ctx.strokeStyle=`rgba(${i}, ${n}, ${o}, ${(t.C+e.C)/2})`,this.ctx.lineWidth=8,this.ctx.beginPath(),this.ctx.moveTo(this.x(t.X),this.y(t.Y)),this.ctx.lineTo(this.x(e.X),this.y(e.Y)),this.ctx.stroke()}render(t){const e=()=>{const e=this.viewer.element.shadowRoot.querySelector("canvas");if(!e)throw new Error("Canvas isn't available before first render");e.width=this.viewer.elWidth,e.height=this.viewer.elHeight,this.ctx=e.getContext("2d"),this.ctx.fillStyle="white",this.ctx.fillRect(0,0,e.width,e.height),this.renderFrame(t)};try{e()}catch(r){requestAnimationFrame(e)}return Object(i.e)("canvas",{width:this.viewer.elWidth,height:this.viewer.elHeight})}}const ut=class{constructor(t){Object(i.g)(this,t),this.canplaythrough$=Object(i.c)(this,"canplaythrough$",7),this.ended$=Object(i.c)(this,"ended$",7),this.loadeddata$=Object(i.c)(this,"loadeddata$",7),this.loadedmetadata$=Object(i.c)(this,"loadedmetadata$",7),this.loadstart$=Object(i.c)(this,"loadstart$",7),this.pause$=Object(i.c)(this,"pause$",7),this.play$=Object(i.c)(this,"play$",7),this.svg=!1,this.width=null,this.height=null,this.loop=!1,this.autoplay=!0,this.playbackRate=1,this.currentTime=NaN,this.duration=NaN,this.ended=!1,this.paused=!0,this.readyState=0}componentWillLoad(){return this.renderer=this.svg?new at(this):new ht(this),this.srcChange()}componentDidLoad(){this.resizeObserver=new ResizeObserver(this.setDimensions.bind(this)),this.resizeObserver.observe(this.element)}async srcChange(){this.clearInterval(),this.setDimensions(),delete this.pose,this.src&&(this.loadstart$.emit(),this.pose=await ot.fromRemote(this.src),this.setDimensions(),this.loadedmetadata$.emit(),this.loadeddata$.emit(),this.canplaythrough$.emit(),this.duration=(this.pose.body.frames.length-1)/this.pose.body.fps,this.currentTime=0,this.autoplay&&this.play())}setDimensions(){if(this.elPadding={width:0,height:0},!this.pose)return this.elWidth=0,void(this.elHeight=0);if(!this.width&&!this.height)return this.elWidth=this.pose.header.width,void(this.elHeight=this.pose.header.height);const t=this.element.getBoundingClientRect(),e=(t,e)=>t.endsWith("px")?Number(t.slice(0,-2)):t.endsWith("%")?e*t.slice(0,-1)/100:Number(t);if(this.width&&this.height){this.elWidth=e(this.width,t.width),this.elHeight=e(this.height,t.height);const r=this.elWidth/this.elHeight,i=this.pose.header.width/this.pose.header.height;i>r?this.elPadding.height=(i-r)*this.elHeight/2:this.elPadding.width=(1/r-1/i)*this.elWidth/2}else this.width?(this.elWidth=e(this.width,t.width),this.elHeight=this.pose.header.height/this.pose.header.width*this.elWidth):this.height&&(this.elHeight=e(this.height,t.height),this.elWidth=this.pose.header.width/this.pose.header.height*this.elHeight)}async syncMedia(t){this.media=t,this.media.addEventListener("pause",this.pause.bind(this)),this.media.addEventListener("play",this.play.bind(this));const e=()=>this.currentTime=this.frameTime(this.media.currentTime);this.media.addEventListener("seek",e),this.media.addEventListener("timeupdate",e);const r=()=>this.playbackRate=this.media.playbackRate;this.media.addEventListener("ratechange",r),r(),this.clearInterval(),this.media.paused?this.pause():this.play()}async nextFrame(){const t=this.currentTime+1/this.pose.body.fps;t>this.duration?this.loop?this.currentTime=t%this.duration:(this.ended$.emit(),this.ended=!0):this.currentTime=t}frameTime(t){return this.pose?Math.floor(t*this.pose.body.fps)/this.pose.body.fps:0}play(){this.paused||this.clearInterval(),this.paused=!1,this.play$.emit(),this.currentTime>this.duration&&(this.currentTime=0);const t=1e3/(this.pose.body.fps*this.playbackRate);if(this.media)this.loopInterval=setInterval(()=>this.currentTime=this.frameTime(this.media.currentTime),t);else{let e=Date.now()/1e3;this.loopInterval=setInterval(()=>{const t=Date.now()/1e3;this.currentTime+=(t-e)*this.playbackRate,e=t,this.currentTime>this.duration&&(this.loop?this.currentTime=this.currentTime%this.duration:(this.ended$.emit(),this.ended=!0,this.clearInterval()))},t)}}pause(){this.paused=!0,this.pause$.emit(),this.clearInterval()}clearInterval(){this.loopInterval&&clearInterval(this.loopInterval)}disconnectedCallback(){this.clearInterval()}render(){if(!this.pose||isNaN(this.currentTime)||!this.renderer)return"";const t=Math.floor((this.currentTime>this.duration?this.duration:this.currentTime)*this.pose.body.fps),e=this.pose.body.frames[t];return Object(i.e)(i.a,null,this.renderer.render(e))}get element(){return Object(i.d)(this)}static get watchers(){return{src:["srcChange"]}}};ut.style=":host{display:inline-block}svg{max-width:100%}svg circle{stroke:black;stroke-width:1px;opacity:0.8}svg line{stroke-width:8px;opacity:0.8;stroke:black}"}}]);